# GECOMæ™ºèƒ½æˆæœ¬åŠ©æ‰‹ MVP 2.0 è¯¦ç»†è§„åˆ’æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0
> **åˆ›å»ºæ—¥æœŸ**: 2025-11-08
> **ä½œè€…**: GECOM Team
> **çŠ¶æ€**: è§„åˆ’ä¸­ â†’ å¾…å®¡æ‰¹

---

## ğŸ“‹ æ–‡æ¡£æ‘˜è¦

æœ¬æ–‡æ¡£æ˜¯åŸºäº**çœŸå®19å›½æˆæœ¬æ•°æ®**å’Œ**ç›Šå®¶ä¹‹å® 30,000å­—ä¸“ä¸šæŠ¥å‘Šæ ‡å‡†**åˆ¶å®šçš„MVP 2.0å®Œæ•´å®æ–½æ–¹æ¡ˆã€‚

### æ ¸å¿ƒå˜æ›´
- âœ… **æ•°æ®é©±åŠ¨**ï¼šä½¿ç”¨çœŸå®çš„M1-M8æ¨¡å—19å›½æ•°æ®ï¼Œæ›¿ä»£POCä¸­çš„ç¡¬ç¼–ç å‡æ•°æ®
- âœ… **ç•Œé¢é‡æ„**ï¼šé‡æ–°è®¾è®¡å®Œæ•´äº”æ­¥å‘å¯¼ï¼ˆStep 0-5ï¼‰ï¼Œå±•ç¤ºGECOMæ–¹æ³•è®ºçš„å®Œæ•´ç²’åº¦
- âœ… **æŠ¥å‘Šå‡çº§**ï¼šå¯¹æ ‡ç›Šå®¶ä¹‹å® æŠ¥å‘Šè´¨é‡ï¼ŒåŒ…å«å›¾è¡¨ã€æ•°æ®æº¯æºã€AIä¼˜åŒ–å»ºè®®
- âœ… **AIé›†æˆ**ï¼šDeepSeek R1/V3çœŸæ­£è¿æ¥æˆæœ¬è®¡ç®—å¼•æ“ï¼Œæä¾›ROIä¼˜åŒ–æŒ‡å¯¼
- âœ… **äº§å“åŒ–**ï¼šä»POC Demoå‡çº§åˆ°å¯æ”¯æŒ19å›½Ã—å¤šå¹³å°Ã—å¤šåœºæ™¯çš„çœŸå®äº§å“

### è§£å†³çš„5ä¸ªæ ¸å¿ƒé—®é¢˜
1. **æ•°æ®å¼•æ“ä¸å®Œæ•´** â†’ æ„å»ºå®Œæ•´çš„19å›½æˆæœ¬å› å­æ•°æ®åº“
2. **æŠ¥å‘Šèƒ½åŠ›ä¸è¶³** â†’ å®ç°30,000å­—çº§åˆ«çš„ä¸“ä¸šæŠ¥å‘Šç”Ÿæˆ
3. **ç•Œé¢ç²’åº¦é”™è¯¯** â†’ é‡è®¾è®¡äº”æ­¥å‘å¯¼å±•ç¤ºM1-M8å®Œæ•´æ¨¡å—
4. **åŠŸèƒ½æœªå¯¹é½** â†’ å¯¹é½GECOM-03äº§å“è§„åˆ’çš„å¤šå›½/å¤šå¹³å°/å¤šåœºæ™¯
5. **AIæœªé›†æˆ** â†’ å®ç°AIåŠ©æ‰‹ä¸æˆæœ¬å¼•æ“çš„æ·±åº¦è”åŠ¨

---

## ç›®å½•

**ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®åº“æ¶æ„è®¾è®¡ï¼ˆåŸºäº19å›½çœŸå®æ•°æ®ï¼‰**
- 1.1 æ•°æ®åº“è®¾è®¡åŸåˆ™
- 1.2 Collection 1: cost_factorsï¼ˆæˆæœ¬å› å­åº“ï¼‰
- 1.3 Collection 2: projectsï¼ˆç”¨æˆ·é¡¹ç›®ï¼‰
- 1.4 Collection 3: calculationsï¼ˆè®¡ç®—è®°å½•ï¼‰
- 1.5 Collection 4: cost_factor_versionsï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰
- 1.6 æ•°æ®å…³ç³»ä¸ç´¢å¼•è®¾è®¡
- 1.7 æ•°æ®å¯¼å…¥ç­–ç•¥

**ç¬¬äºŒéƒ¨åˆ†ï¼šå®Œæ•´äº”æ­¥ç•Œé¢é‡è®¾è®¡ï¼ˆStep 0-5ï¼‰**
- 2.1 æ•´ä½“è®¾è®¡åŸåˆ™
- 2.2 Step 0: é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆé‡è®¾è®¡ï¼‰
- 2.3 Step 1: ä¸šåŠ¡åœºæ™¯å®šä¹‰ï¼ˆé‡è®¾è®¡ï¼‰
- 2.4 Step 2: æˆæœ¬å‚æ•°é…ç½®ï¼ˆå®Œæ•´M1-M8å±•ç¤ºï¼‰
- 2.5 Step 3: æˆæœ¬å»ºæ¨¡ç»“æœï¼ˆå¢å¼ºå¯è§†åŒ–ï¼‰
- 2.6 Step 4: å¤šåœºæ™¯å¯¹æ¯”åˆ†æï¼ˆ19å›½å¯¹æ¯”ï¼‰
- 2.7 Step 5: AIæ™ºèƒ½åŠ©æ‰‹ï¼ˆæ·±åº¦é›†æˆï¼‰
- 2.8 ç»„ä»¶å±‚æ¬¡ç»“æ„ä¸æ•°æ®æµ

**ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸“ä¸šæŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ**
- 3.1 æŠ¥å‘Šè´¨é‡æ ‡å‡†ï¼ˆå¯¹æ ‡ç›Šå®¶ä¹‹å® ï¼‰
- 3.2 æŠ¥å‘Šæ¨¡æ¿è®¾è®¡
- 3.3 æŠ¥å‘Šç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ
- 3.4 AIå¢å¼ºï¼šæˆ˜ç•¥å»ºè®®ç”Ÿæˆ
- 3.5 æ•°æ®æº¯æºä¸è´¨é‡æ ‡è¯†

**ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®å®Œæ•´æ€§ä¸è´¨é‡æå‡**
- 4.1 å½“å‰æ•°æ®å®Œæ•´åº¦è¯„ä¼°
- 4.2 æ•°æ®è¡¥å…¨ä¼˜å…ˆçº§
- 4.3 æ•°æ®æ”¶é›†æ–¹æ¡ˆ
- 4.4 æ•°æ®è´¨é‡åˆ†çº§ï¼ˆTier 1/2/3ï¼‰

**ç¬¬äº”éƒ¨åˆ†ï¼šæŠ€æœ¯å®æ–½æ–¹æ¡ˆ**
- 5.1 GECOMè®¡ç®—å¼•æ“å‡çº§
- 5.2 AIåŠ©æ‰‹å·¥å…·è°ƒç”¨è®¾è®¡
- 5.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- 5.4 é”™è¯¯å¤„ç†ä¸å®¹é”™

**ç¬¬å…­éƒ¨åˆ†ï¼š4å‘¨è¯¦ç»†å®æ–½è®¡åˆ’**
- 6.1 Week 1: æ•°æ®åŸºç¡€è®¾æ–½
- 6.2 Week 2: ç•Œé¢é‡æ„
- 6.3 Week 3: æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ
- 6.4 Week 4: AIé›†æˆä¸æµ‹è¯•
- 6.5 éªŒæ”¶æ ‡å‡†ä¸äº¤ä»˜ç‰©

**ç¬¬ä¸ƒéƒ¨åˆ†ï¼šäº§å“è§„åˆ’æ–‡æ¡£æ›´æ–°**
- 7.1 GECOM-03æ ¸å¿ƒåŠŸèƒ½é‡å†™
- 7.2 CLAUDE.mdä¸Šä¸‹æ–‡æ›´æ–°
- 7.3 READMEæ–‡æ¡£åˆ·æ–°

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®åº“æ¶æ„è®¾è®¡ï¼ˆåŸºäº19å›½çœŸå®æ•°æ®ï¼‰

## 1.1 æ•°æ®åº“è®¾è®¡åŸåˆ™

### è®¾è®¡ç›®æ ‡
1. **çœŸå®æ•°æ®é©±åŠ¨**ï¼šæ‰€æœ‰æˆæœ¬å‚æ•°æ¥è‡ªå¯æº¯æºçš„19å›½çœŸå®æ•°æ®
2. **çµæ´»å¯æ‰©å±•**ï¼šæ”¯æŒæœªæ¥æ–°å¢å›½å®¶ã€æ–°å¢æˆæœ¬æ¨¡å—
3. **ç”¨æˆ·å¯è¦†ç›–**ï¼šåŒºåˆ†"ç³»ç»Ÿé¢„è®¾"ä¸"ç”¨æˆ·è‡ªå®šä¹‰"
4. **ç‰ˆæœ¬å¯è¿½æº¯**ï¼šæˆæœ¬å› å­å˜åŒ–æ—¶æ”¯æŒå†å²ç‰ˆæœ¬æŸ¥è¯¢
5. **æŸ¥è¯¢é«˜æ€§èƒ½**ï¼šæŒ‰å›½å®¶/è¡Œä¸šç´¢å¼•ï¼Œæ”¯æŒå¿«é€Ÿé¢„å¡«

### æ ¸å¿ƒè®¾è®¡å†³ç­–

**å†³ç­–1ï¼šå•è¡¨ vs å¤šè¡¨**
- âŒ å•è¡¨æ–¹æ¡ˆï¼šå°†æ‰€æœ‰M1-M8æ•°æ®å­˜å…¥ä¸€ä¸ªmegaè¡¨ï¼ˆå­—æ®µè¿‡å¤šï¼Œéš¾ç»´æŠ¤ï¼‰
- âœ… **å¤šè¡¨æ–¹æ¡ˆ**ï¼šæŒ‰é€»è¾‘åˆ†ç»„æ‹†åˆ†ä¸º4ä¸ªCollection
  - `cost_factors`ï¼ˆæˆæœ¬å› å­åº“ï¼ŒæŒ‰å›½å®¶å­˜å‚¨M1-M8å‚æ•°ï¼‰
  - `projects`ï¼ˆç”¨æˆ·é¡¹ç›®å…ƒæ•°æ®ï¼‰
  - `calculations`ï¼ˆè®¡ç®—è®°å½•ï¼Œå«å®Œæ•´è¾“å…¥è¾“å‡ºï¼‰
  - `cost_factor_versions`ï¼ˆç‰ˆæœ¬ç®¡ç†ï¼Œæ”¯æŒæˆæœ¬å› å­æ›´æ–°ï¼‰

**å†³ç­–2ï¼šJSONåµŒå¥— vs æ‰å¹³å­—æ®µ**
- âœ… **æ··åˆæ–¹æ¡ˆ**ï¼š
  - é«˜é¢‘æŸ¥è¯¢å­—æ®µæ‰å¹³åŒ–ï¼ˆå¦‚`country`, `tariff_rate`, `vat_rate`ï¼‰
  - å¤æ‚ç»“æ„JSONåŒ–ï¼ˆå¦‚`logistics`åŒ…å«æµ·è¿/ç©ºè¿å­å­—æ®µï¼‰
  - ç”¨æˆ·è¦†ç›–å€¼JSONåŒ–ï¼ˆ`user_overrides`å­—æ®µï¼‰

**å†³ç­–3ï¼šæ•°æ®æº¯æºæ ‡è¯†**
- æ¯ä¸ªæˆæœ¬å‚æ•°é™„åŠ `data_source`å­—æ®µï¼š
  - `tier1_official`ï¼šå®˜æ–¹æ¥æºï¼ˆæµ·å…³ã€æ”¿åºœç½‘ç«™ï¼‰ï¼Œç½®ä¿¡åº¦100%
  - `tier2_authoritative`ï¼šæƒå¨æ¥æºï¼ˆç‰©æµå•†ã€è¡Œä¸šæŠ¥å‘Šï¼‰ï¼Œç½®ä¿¡åº¦90%
  - `tier3_estimated`ï¼šç»éªŒä¼°ç®—ï¼ˆAIè°ƒç ”ã€ä¸“å®¶ä¼°è®¡ï¼‰ï¼Œç½®ä¿¡åº¦80%

---

## 1.2 Collection 1: cost_factorsï¼ˆæˆæœ¬å› å­åº“ï¼‰

### è®¾è®¡æ€è·¯
- **ä¸»é”®**ï¼š`country` (å›½å®¶ä»£ç ï¼Œå¦‚"US", "DE", "VN")
- **è¡Œä¸šå­—æ®µ**ï¼š`industry` (å½“å‰æ”¯æŒ"pet_food", æœªæ¥æ‰©å±•"vape", "electronics")
- **ç‰ˆæœ¬å­—æ®µ**ï¼š`version` (å¦‚"2025Q1"ï¼Œå…³è”cost_factor_versionsè¡¨)
- **å®Œæ•´çš„M1-M8å‚æ•°**ï¼šæ‰å¹³åŒ– + JSONæ··åˆå­˜å‚¨

### Appwrite Schema (JSONæ ¼å¼)

```json
{
  "collection_id": "cost_factors",
  "name": "æˆæœ¬å› å­åº“ (19å›½M1-M8æ•°æ®)",
  "enabled": true,
  "attributes": [
    {
      "key": "country",
      "type": "string",
      "size": 10,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "country_name_cn",
      "type": "string",
      "size": 50,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "country_flag",
      "type": "string",
      "size": 10,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "industry",
      "type": "string",
      "size": 50,
      "required": true,
      "default": "pet_food",
      "array": false
    },
    {
      "key": "version",
      "type": "string",
      "size": 20,
      "required": true,
      "default": "2025Q1",
      "array": false
    },

    // ========== M1: å¸‚åœºå‡†å…¥ ==========
    {
      "key": "m1_regulatory_agency",
      "type": "string",
      "size": 200,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m1_pre_approval_required",
      "type": "boolean",
      "required": false,
      "default": false,
      "array": false
    },
    {
      "key": "m1_registration_required",
      "type": "boolean",
      "required": false,
      "default": false,
      "array": false
    },
    {
      "key": "m1_complexity",
      "type": "string",
      "size": 20,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m1_estimated_cost_usd",
      "type": "float",
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m1_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier3_estimated",
      "array": false
    },

    // ========== M2: æŠ€æœ¯åˆè§„ ==========
    {
      "key": "m2_certifications_required",
      "type": "string",
      "size": 500,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m2_estimated_cost_usd",
      "type": "float",
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m2_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier3_estimated",
      "array": false
    },

    // ========== M3: ä¾›åº”é“¾æ­å»º ==========
    {
      "key": "m3_packaging_rate",
      "type": "float",
      "required": false,
      "default": 0.02,
      "array": false
    },
    {
      "key": "m3_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier2_authoritative",
      "array": false
    },

    // ========== M4: è´§ç‰©ç¨è´¹ ==========
    {
      "key": "m4_hs_code",
      "type": "string",
      "size": 20,
      "required": false,
      "default": "2309.10.00",
      "array": false
    },
    {
      "key": "m4_base_tariff_rate",
      "type": "float",
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m4_effective_tariff_rate",
      "type": "float",
      "required": true,
      "default": 0,
      "array": false
    },
    {
      "key": "m4_tariff_notes",
      "type": "string",
      "size": 500,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m4_vat_rate",
      "type": "float",
      "required": true,
      "default": 0,
      "array": false
    },
    {
      "key": "m4_vat_notes",
      "type": "string",
      "size": 500,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m4_tariff_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier1_official",
      "array": false
    },
    {
      "key": "m4_vat_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier1_official",
      "array": false
    },

    // ========== M4: ç‰©æµï¼ˆJSONå­—æ®µï¼‰ ==========
    {
      "key": "m4_logistics",
      "type": "string",
      "size": 2000,
      "required": false,
      "default": null,
      "array": false
    },

    // ========== M5: ç‰©æµé…é€ ==========
    {
      "key": "m5_last_mile_delivery_usd",
      "type": "float",
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m5_return_rate",
      "type": "float",
      "required": false,
      "default": 0.10,
      "array": false
    },
    {
      "key": "m5_return_cost_rate",
      "type": "float",
      "required": false,
      "default": 0.30,
      "array": false
    },
    {
      "key": "m5_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier2_authoritative",
      "array": false
    },

    // ========== M6: è¥é”€è·å®¢ ==========
    {
      "key": "m6_marketing_rate",
      "type": "float",
      "required": false,
      "default": 0.15,
      "array": false
    },
    {
      "key": "m6_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier2_authoritative",
      "array": false
    },

    // ========== M7: æ”¯ä»˜æ‰‹ç»­è´¹ ==========
    {
      "key": "m7_payment_rate",
      "type": "float",
      "required": false,
      "default": 0.029,
      "array": false
    },
    {
      "key": "m7_payment_fixed_usd",
      "type": "float",
      "required": false,
      "default": 0.30,
      "array": false
    },
    {
      "key": "m7_platform_commission_rate",
      "type": "float",
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "m7_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier1_official",
      "array": false
    },

    // ========== M8: è¿è¥ç®¡ç† ==========
    {
      "key": "m8_ga_rate",
      "type": "float",
      "required": false,
      "default": 0.03,
      "array": false
    },
    {
      "key": "m8_data_source",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "tier2_authoritative",
      "array": false
    },

    // ========== å…ƒæ•°æ® ==========
    {
      "key": "created_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "updated_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    }
  ],
  "indexes": [
    {
      "key": "idx_country",
      "type": "key",
      "attributes": ["country"],
      "orders": ["ASC"]
    },
    {
      "key": "idx_country_industry_version",
      "type": "unique",
      "attributes": ["country", "industry", "version"],
      "orders": ["ASC", "ASC", "ASC"]
    }
  ]
}
```

### m4_logistics JSONå­—æ®µç»“æ„

```typescript
interface M4Logistics {
  sea_freight: {
    usd_per_kg: number;
    lcl_usd_per_cbm_min: number;
    lcl_usd_per_cbm_max: number;
    fcl_20ft_usd_min: number;
    fcl_20ft_usd_max: number;
    transit_days_min: number;
    transit_days_max: number;
    data_source: 'tier1_official' | 'tier2_authoritative' | 'tier3_estimated';
  };
  air_freight: {
    usd_per_kg: number;
    ddp_usd_per_kg: number;
    transit_days_min: number;
    transit_days_max: number;
    data_source: 'tier1_official' | 'tier2_authoritative' | 'tier3_estimated';
  };
}
```

### æ•°æ®ç¤ºä¾‹ï¼ˆå‰3è¡Œï¼‰

```json
[
  {
    "country": "US",
    "country_name_cn": "ç¾å›½",
    "country_flag": "ğŸ‡ºğŸ‡¸",
    "industry": "pet_food",
    "version": "2025Q1",
    "m1_regulatory_agency": "FDA, APHIS",
    "m1_pre_approval_required": false,
    "m1_registration_required": false,
    "m1_complexity": "é«˜",
    "m1_estimated_cost_usd": 5000,
    "m1_data_source": "tier2_authoritative",
    "m4_effective_tariff_rate": 0.55,
    "m4_tariff_notes": "10%äº’æƒ å…³ç¨ + 25% Section 301 + 20%é™„åŠ ",
    "m4_vat_rate": 0.06,
    "m4_vat_notes": "å·ç¨å·®å¼‚ï¼ŒèŒƒå›´0-10%+",
    "m4_tariff_data_source": "tier1_official",
    "m4_vat_data_source": "tier1_official",
    "m4_logistics": "{\"sea_freight\":{\"usd_per_kg\":0.20,\"lcl_usd_per_cbm_min\":100,\"lcl_usd_per_cbm_max\":300,\"fcl_20ft_usd_min\":2250,\"fcl_20ft_usd_max\":4500,\"transit_days_min\":18,\"transit_days_max\":25,\"data_source\":\"tier2_authoritative\"},\"air_freight\":{\"usd_per_kg\":4.5,\"ddp_usd_per_kg\":6.0,\"transit_days_min\":5,\"transit_days_max\":7,\"data_source\":\"tier2_authoritative\"}}",
    "m5_last_mile_delivery_usd": 7.5,
    "m5_return_rate": 0.10,
    "m5_return_cost_rate": 0.30,
    "m5_data_source": "tier2_authoritative",
    "m6_marketing_rate": 0.15,
    "m6_data_source": "tier2_authoritative",
    "m7_payment_rate": 0.029,
    "m7_payment_fixed_usd": 0.30,
    "m7_platform_commission_rate": 0.15,
    "m7_data_source": "tier1_official",
    "m8_ga_rate": 0.03,
    "m8_data_source": "tier2_authoritative"
  },
  {
    "country": "VN",
    "country_name_cn": "è¶Šå—",
    "country_flag": "ğŸ‡»ğŸ‡³",
    "industry": "pet_food",
    "version": "2025Q1",
    "m1_regulatory_agency": "DAH (Department of Animal Health)",
    "m1_pre_approval_required": false,
    "m1_registration_required": false,
    "m1_complexity": "ä½",
    "m1_estimated_cost_usd": 1000,
    "m1_data_source": "tier3_estimated",
    "m4_effective_tariff_rate": 0,
    "m4_tariff_notes": "RCEPåå®šä¼˜æƒ ï¼Œ0%å…³ç¨",
    "m4_vat_rate": 0.10,
    "m4_vat_notes": "æ ‡å‡†10%ï¼Œéƒ¨åˆ†å•†å“ä¸´æ—¶8%",
    "m4_tariff_data_source": "tier1_official",
    "m4_vat_data_source": "tier1_official",
    "m4_logistics": "{\"sea_freight\":{\"usd_per_kg\":0.05,\"lcl_usd_per_cbm_min\":50,\"lcl_usd_per_cbm_max\":50,\"fcl_20ft_usd_min\":500,\"fcl_20ft_usd_max\":750,\"transit_days_min\":7,\"transit_days_max\":12,\"data_source\":\"tier2_authoritative\"},\"air_freight\":{\"usd_per_kg\":2.5,\"ddp_usd_per_kg\":3.5,\"transit_days_min\":3,\"transit_days_max\":5,\"data_source\":\"tier2_authoritative\"}}",
    "m5_last_mile_delivery_usd": 0.18,
    "m5_data_source": "tier2_authoritative",
    "m7_platform_commission_rate": 0.06,
    "m7_data_source": "tier2_authoritative"
  },
  {
    "country": "DE",
    "country_name_cn": "å¾·å›½",
    "country_flag": "ğŸ‡©ğŸ‡ª",
    "industry": "pet_food",
    "version": "2025Q1",
    "m1_regulatory_agency": "EU Commission, BMEL",
    "m1_pre_approval_required": true,
    "m1_registration_required": false,
    "m1_complexity": "æé«˜",
    "m1_estimated_cost_usd": 15000,
    "m1_data_source": "tier2_authoritative",
    "m4_effective_tariff_rate": 0.05,
    "m4_tariff_notes": "EU TARIC 5%",
    "m4_vat_rate": 0.19,
    "m4_vat_notes": "æ ‡å‡†19%ï¼Œéƒ¨åˆ†å•†å“å‡ç¨7%",
    "m4_tariff_data_source": "tier1_official",
    "m4_vat_data_source": "tier1_official",
    "m4_logistics": "{\"sea_freight\":{\"usd_per_kg\":0.065,\"lcl_usd_per_cbm_min\":50,\"lcl_usd_per_cbm_max\":80,\"fcl_20ft_usd_min\":2000,\"fcl_20ft_usd_max\":3500,\"transit_days_min\":30,\"transit_days_max\":40,\"data_source\":\"tier2_authoritative\"},\"air_freight\":{\"usd_per_kg\":5.5,\"ddp_usd_per_kg\":7.0,\"transit_days_min\":5,\"transit_days_max\":7,\"data_source\":\"tier2_authoritative\"}}",
    "m5_last_mile_delivery_usd": 7.86,
    "m5_data_source": "tier2_authoritative",
    "m7_platform_commission_rate": 0.15,
    "m7_data_source": "tier2_authoritative"
  }
]
```

---

## 1.3 Collection 2: projectsï¼ˆç”¨æˆ·é¡¹ç›®ï¼‰

### è®¾è®¡æ€è·¯
- å­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„é¡¹ç›®å…ƒæ•°æ®
- å…³è”ç”¨æˆ·IDï¼ˆæœªæ¥æ”¯æŒå¤šç”¨æˆ·ï¼‰
- é¡¹ç›®çº§åˆ«çš„é…ç½®ï¼ˆè¡Œä¸šã€ç›®æ ‡å¸‚åœºã€é”€å”®æ¸ é“ï¼‰

### Appwrite Schema

```json
{
  "collection_id": "projects",
  "name": "ç”¨æˆ·é¡¹ç›®",
  "enabled": true,
  "attributes": [
    {
      "key": "user_id",
      "type": "string",
      "size": 50,
      "required": false,
      "default": "anonymous",
      "array": false
    },
    {
      "key": "name",
      "type": "string",
      "size": 200,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "industry",
      "type": "string",
      "size": 50,
      "required": true,
      "default": "pet_food",
      "array": false
    },
    {
      "key": "target_country",
      "type": "string",
      "size": 10,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "sales_channel",
      "type": "string",
      "size": 50,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "description",
      "type": "string",
      "size": 1000,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "created_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "updated_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    }
  ],
  "indexes": [
    {
      "key": "idx_user_id",
      "type": "key",
      "attributes": ["user_id"],
      "orders": ["ASC"]
    },
    {
      "key": "idx_created_at",
      "type": "key",
      "attributes": ["created_at"],
      "orders": ["DESC"]
    }
  ]
}
```

---

## 1.4 Collection 3: calculationsï¼ˆè®¡ç®—è®°å½•ï¼‰

### è®¾è®¡æ€è·¯
- å­˜å‚¨æ¯æ¬¡æˆæœ¬è®¡ç®—çš„å®Œæ•´è¾“å…¥å’Œè¾“å‡º
- æ”¯æŒå†å²æŸ¥è¯¢å’Œé‡ç°
- åŒºåˆ†"ç³»ç»Ÿé¢„è®¾"å’Œ"ç”¨æˆ·è¦†ç›–"å€¼
- å…³è”ä½¿ç”¨çš„cost_factorç‰ˆæœ¬

### Appwrite Schema

```json
{
  "collection_id": "calculations",
  "name": "è®¡ç®—è®°å½•",
  "enabled": true,
  "attributes": [
    {
      "key": "project_id",
      "type": "string",
      "size": 50,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "cost_factor_version",
      "type": "string",
      "size": 20,
      "required": true,
      "default": "2025Q1",
      "array": false
    },
    {
      "key": "scope",
      "type": "string",
      "size": 10000,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "cost_result",
      "type": "string",
      "size": 15000,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "user_overrides",
      "type": "string",
      "size": 5000,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "created_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    }
  ],
  "indexes": [
    {
      "key": "idx_project_id",
      "type": "key",
      "attributes": ["project_id"],
      "orders": ["ASC"]
    },
    {
      "key": "idx_created_at",
      "type": "key",
      "attributes": ["created_at"],
      "orders": ["DESC"]
    }
  ]
}
```

### å­—æ®µè¯´æ˜

**scopeå­—æ®µï¼ˆJSONï¼‰**ï¼šå®Œæ•´è¾“å…¥å‚æ•°
```typescript
interface CalculationScope {
  // åŸºç¡€ä¿¡æ¯
  productName: string;
  targetCountry: string;
  salesChannel: string;

  // äº§å“å‚æ•°
  cogsUsd: number;
  sellingPriceUsd: number;
  productWeightKg: number;
  monthlyVolume: number;

  // CAPEX
  capex: {
    m1_market_entry: number;
    m2_compliance: number;
    m3_supply_chain_setup: number;
  };

  // OPEX (ä½¿ç”¨é¢„è®¾ or ç”¨æˆ·è¦†ç›–)
  opex: {
    shippingMethod: 'sea' | 'air';
    // å…¶ä»–å­—æ®µä»cost_factorsåŠ è½½æˆ–ç”¨æˆ·è¦†ç›–
  };
}
```

**cost_resultå­—æ®µï¼ˆJSONï¼‰**ï¼šå®Œæ•´è¾“å‡ºç»“æœ
```typescript
interface CostResult {
  // CAPEXæ˜ç»†
  capex: {
    m1: number;
    m2: number;
    m3: number;
    total: number;
  };

  // OPEXæ˜ç»†ï¼ˆå•ä½æˆæœ¬ï¼‰
  opex: {
    m4_cogs: number;
    m4_tariff: number;
    m4_logistics: number;
    m4_vat: number;
    m5_last_mile: number;
    m5_return: number;
    m6_marketing: number;
    m7_payment: number;
    m7_platform_commission: number;
    m8_ga: number;
    total: number;
  };

  // å•ä½ç»æµæ¨¡å‹
  unit_economics: {
    revenue: number;
    cost: number;
    gross_profit: number;
    gross_margin: number; // ç™¾åˆ†æ¯”
  };

  // å…³é”®KPI
  kpis: {
    roi: number; // ç™¾åˆ†æ¯”
    payback_period_months: number;
    breakeven_price: number;
    breakeven_volume: number;
  };

  // æˆæœ¬åˆ†å¸ƒï¼ˆç”¨äºé¥¼å›¾ï¼‰
  cost_breakdown: Array<{
    module: string; // "M4è´§ç‰©ç¨è´¹"
    amount: number;
    percentage: number;
  }>;
}
```

**user_overrideså­—æ®µï¼ˆJSONï¼‰**ï¼šç”¨æˆ·è¦†ç›–çš„å‚æ•°
```typescript
interface UserOverrides {
  // è®°å½•å“ªäº›å­—æ®µè¢«ç”¨æˆ·è‡ªå®šä¹‰
  m4_effective_tariff_rate?: number;
  m4_vat_rate?: number;
  m6_marketing_rate?: number;
  // ... å…¶ä»–å¯è¦†ç›–å­—æ®µ

  // å…ƒæ•°æ®
  override_reason?: string; // ç”¨æˆ·å¤‡æ³¨ä¸ºä»€ä¹ˆè¦†ç›–
}
```

---

## 1.5 Collection 4: cost_factor_versionsï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰

### è®¾è®¡æ€è·¯
- ç®¡ç†æˆæœ¬å› å­çš„ç‰ˆæœ¬å˜æ›´
- æ”¯æŒå†å²ç‰ˆæœ¬æŸ¥è¯¢
- è¿½è¸ªæ•°æ®æ›´æ–°æ—¶é—´å’Œå˜æ›´å†…å®¹

### Appwrite Schema

```json
{
  "collection_id": "cost_factor_versions",
  "name": "æˆæœ¬å› å­ç‰ˆæœ¬ç®¡ç†",
  "enabled": true,
  "attributes": [
    {
      "key": "version",
      "type": "string",
      "size": 20,
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "effective_date",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    },
    {
      "key": "is_current",
      "type": "boolean",
      "required": true,
      "default": false,
      "array": false
    },
    {
      "key": "changelog",
      "type": "string",
      "size": 2000,
      "required": false,
      "default": null,
      "array": false
    },
    {
      "key": "created_at",
      "type": "datetime",
      "required": true,
      "default": null,
      "array": false
    }
  ],
  "indexes": [
    {
      "key": "idx_version",
      "type": "unique",
      "attributes": ["version"],
      "orders": ["ASC"]
    },
    {
      "key": "idx_is_current",
      "type": "key",
      "attributes": ["is_current"],
      "orders": ["DESC"]
    }
  ]
}
```

### æ•°æ®ç¤ºä¾‹

```json
[
  {
    "version": "2025Q1",
    "effective_date": "2025-01-01T00:00:00.000Z",
    "is_current": true,
    "changelog": "åˆå§‹ç‰ˆæœ¬ï¼šåŸºäº2024Q4æ•°æ®ï¼ŒåŒ…å«19å›½å®Œæ•´M1-M8æˆæœ¬å› å­ã€‚ç¾å›½å…³ç¨æ›´æ–°ä¸º55%ï¼ˆå«æ–°å¢20%é™„åŠ å…³ç¨ï¼‰ã€‚",
    "created_at": "2025-01-01T00:00:00.000Z"
  },
  {
    "version": "2024Q4",
    "effective_date": "2024-10-01T00:00:00.000Z",
    "is_current": false,
    "changelog": "å†å²ç‰ˆæœ¬ï¼šç¾å›½å…³ç¨35%ï¼ˆ10%äº’æƒ +25% Section 301ï¼‰ã€‚",
    "created_at": "2024-10-01T00:00:00.000Z"
  }
]
```

---

## 1.6 æ•°æ®å…³ç³»ä¸ç´¢å¼•è®¾è®¡

### æ•°æ®å…³ç³»å›¾ï¼ˆER Diagramï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cost_factor_versions           â”‚
â”‚  - version (PK)                 â”‚
â”‚  - effective_date               â”‚
â”‚  - is_current                   â”‚
â”‚  - changelog                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1:N (ä¸€ä¸ªç‰ˆæœ¬å¯¹åº”å¤šä¸ªå›½å®¶çš„æˆæœ¬å› å­)
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cost_factors                   â”‚
â”‚  - id (PK)                      â”‚
â”‚  - country                      â”‚
â”‚  - industry                     â”‚
â”‚  - version (FK)                 â”‚â”€â”€â”
â”‚  - m1_* (19ä¸ªM1å­—æ®µ)            â”‚  â”‚
â”‚  - m4_* (12ä¸ªM4å­—æ®µ)            â”‚  â”‚
â”‚  - m5_* (4ä¸ªM5å­—æ®µ)             â”‚  â”‚
â”‚  - ...                          â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚                         â”‚
            â”‚ N:1 (è®¡ç®—æ—¶å¼•ç”¨ç‰¹å®šç‰ˆæœ¬çš„æˆæœ¬å› å­)
            â”‚                         â”‚
            â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  calculations                   â”‚  â”‚
â”‚  - id (PK)                      â”‚  â”‚
â”‚  - project_id (FK)              â”‚  â”‚
â”‚  - cost_factor_version (FK) â”€â”€â”€â”€â”˜
â”‚  - scope (JSON)                 â”‚
â”‚  - cost_result (JSON)           â”‚
â”‚  - user_overrides (JSON)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–²
            â”‚ N:1 (ä¸€ä¸ªé¡¹ç›®æœ‰å¤šæ¬¡è®¡ç®—)
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  projects                       â”‚
â”‚  - id (PK)                      â”‚
â”‚  - user_id                      â”‚
â”‚  - name                         â”‚
â”‚  - industry                     â”‚
â”‚  - target_country               â”‚
â”‚  - sales_channel                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŸ¥è¯¢åœºæ™¯ä¸ç´¢å¼•ä¼˜åŒ–

**åœºæ™¯1ï¼šç”¨æˆ·é€‰æ‹©å›½å®¶ååŠ è½½é¢„è®¾å‚æ•°**
```sql
-- æŸ¥è¯¢ï¼šç»™å®šå›½å®¶å’Œè¡Œä¸šï¼ŒåŠ è½½å½“å‰ç‰ˆæœ¬çš„æˆæœ¬å› å­
SELECT * FROM cost_factors
WHERE country = 'US'
  AND industry = 'pet_food'
  AND version = (SELECT version FROM cost_factor_versions WHERE is_current = true)

-- ç´¢å¼•ï¼šidx_country_industry_version (å·²åˆ›å»º)
```

**åœºæ™¯2ï¼šæŸ¥çœ‹å†å²è®¡ç®—è®°å½•**
```sql
-- æŸ¥è¯¢ï¼šç»™å®šé¡¹ç›®ï¼ŒæŒ‰æ—¶é—´å€’åºæŸ¥çœ‹æ‰€æœ‰è®¡ç®—
SELECT * FROM calculations
WHERE project_id = 'xxx'
ORDER BY created_at DESC

-- ç´¢å¼•ï¼šidx_project_id + idx_created_at (å·²åˆ›å»º)
```

**åœºæ™¯3ï¼šå¯¹æ¯”ä¸åŒç‰ˆæœ¬çš„æˆæœ¬å› å­å˜åŒ–**
```sql
-- æŸ¥è¯¢ï¼šç»™å®šå›½å®¶ï¼Œå¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬çš„å…³ç¨å·®å¼‚
SELECT version, m4_effective_tariff_rate
FROM cost_factors
WHERE country = 'US'
  AND industry = 'pet_food'
  AND version IN ('2025Q1', '2024Q4')

-- ç´¢å¼•ï¼šidx_country_industry_version (å·²åˆ›å»º)
```

---

## 1.7 æ•°æ®å¯¼å…¥ç­–ç•¥

### æ•°æ®æ¥æºæ¸…å•

åŸºäºå·²æœ‰çš„19å›½çœŸå®æ•°æ®æ–‡ä»¶ï¼š

| æ–‡ä»¶å | æ•°æ®ç±»å‹ | å¯¹åº”æ¨¡å— | å¯¼å…¥ç›®æ ‡å­—æ®µ |
|--------|---------|---------|-------------|
| M1_è¡Œä¸šç‰¹å®šå‡†å…¥è®¸å¯_å® ç‰©é£Ÿå“19å›½å‡†å…¥è®¸å¯.xlsx | Excel | M1 | m1_regulatory_agency, m1_complexity, m1_pre_approval_required |
| M4_è¿›å£å…³ç¨_19å›½çš„å…³ç¨ç¨ç‡_å® ç‰©é£Ÿå“.xlsx | Excel | M4 | m4_effective_tariff_rate, m4_tariff_notes |
| M4_æµè½¬ç¨ï¼ˆVATGSTé”€å”®ç¨ï¼‰_19_countries.csv | CSV | M4 | m4_vat_rate, m4_vat_notes |
| M4_å¤´ç¨‹ç‰©æµ_æµ·è¿.xlsx | Excel | M4 | m4_logistics.sea_freight |
| M4_å¤´ç¨‹ç‰©æµ_ç©ºè¿.xlsx | Excel | M4 | m4_logistics.air_freight |
| M5_å°¾ç¨‹é…é€è´¹.csv | CSV | M5 | m5_last_mile_delivery_usd |
| M7_ç¬¬ä¸‰æ–¹å¹³å°é”€å”®ä½£é‡‘.csv | CSV | M7 | m7_platform_commission_rate |
| M3/M5/M6/M7/M8çš„TXTæ–‡ä»¶ | TXT | M3-M8 | å…¬å¼å‚æ•°ï¼ˆå¦‚m3_packaging_rate=0.02ï¼‰ |

### å¯¼å…¥è„šæœ¬è®¾è®¡ï¼ˆPythonï¼‰

**Step 1: è¯»å–Excelå’ŒCSVæ•°æ®**

```python
import pandas as pd
import json
from datetime import datetime

# è¯»å–M1æ•°æ®ï¼ˆ19å›½åˆè§„ï¼‰
m1_df = pd.read_excel('M1_è¡Œä¸šç‰¹å®šå‡†å…¥è®¸å¯_å® ç‰©é£Ÿå“19å›½å‡†å…¥è®¸å¯.xlsx')

# è¯»å–M4å…³ç¨æ•°æ®
m4_tariff_df = pd.read_excel('M4_è¿›å£å…³ç¨_19å›½çš„å…³ç¨ç¨ç‡_å® ç‰©é£Ÿå“.xlsx')

# è¯»å–M4 VATæ•°æ®
m4_vat_df = pd.read_csv('M4_æµè½¬ç¨ï¼ˆVATGSTé”€å”®ç¨ï¼‰_19_countries.csv')

# è¯»å–M4ç‰©æµæ•°æ®
m4_sea_df = pd.read_excel('M4_å¤´ç¨‹ç‰©æµ_æµ·è¿.xlsx')
m4_air_df = pd.read_excel('M4_å¤´ç¨‹ç‰©æµ_ç©ºè¿.xlsx')

# è¯»å–M5é…é€æ•°æ®
m5_df = pd.read_csv('M5_å°¾ç¨‹é…é€è´¹.csv')

# è¯»å–M7ä½£é‡‘æ•°æ®
m7_df = pd.read_csv('M7_ç¬¬ä¸‰æ–¹å¹³å°é”€å”®ä½£é‡‘.csv')

# åˆå¹¶æ‰€æœ‰æ•°æ®ï¼ˆæŒ‰å›½å®¶ä»£ç ï¼‰
countries = [
    'US', 'CA', 'DE', 'GB', 'FR', 'SG', 'MY', 'PH', 'VN', 'TH',
    'ID', 'IN', 'JP', 'KR', 'AU', 'SA', 'AE', 'MX', 'BR'
]

cost_factors = []

for country in countries:
    # ä»å„è¡¨æå–æ•°æ®
    m1_row = m1_df[m1_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m4_tariff_row = m4_tariff_df[m4_tariff_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m4_vat_row = m4_vat_df[m4_vat_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m4_sea_row = m4_sea_df[m4_sea_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m4_air_row = m4_air_df[m4_air_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m5_row = m5_df[m5_df['å›½å®¶ä»£ç '] == country].iloc[0]
    m7_row = m7_df[m7_df['å›½å®¶ä»£ç '] == country].iloc[0]

    # æ„å»ºlogistics JSON
    logistics = {
        "sea_freight": {
            "usd_per_kg": m4_sea_row['USD/kg'],
            "lcl_usd_per_cbm_min": m4_sea_row['LCL_Min'],
            "lcl_usd_per_cbm_max": m4_sea_row['LCL_Max'],
            "fcl_20ft_usd_min": m4_sea_row['FCL_20ft_Min'],
            "fcl_20ft_usd_max": m4_sea_row['FCL_20ft_Max'],
            "transit_days_min": m4_sea_row['Transit_Days_Min'],
            "transit_days_max": m4_sea_row['Transit_Days_Max'],
            "data_source": "tier2_authoritative"
        },
        "air_freight": {
            "usd_per_kg": m4_air_row['USD/kg'],
            "ddp_usd_per_kg": m4_air_row['DDP_USD/kg'],
            "transit_days_min": m4_air_row['Transit_Days_Min'],
            "transit_days_max": m4_air_row['Transit_Days_Max'],
            "data_source": "tier2_authoritative"
        }
    }

    # æ„å»ºå®Œæ•´è®°å½•
    record = {
        "country": country,
        "country_name_cn": m1_row['å›½å®¶'],
        "country_flag": m1_row['å›½æ——'],
        "industry": "pet_food",
        "version": "2025Q1",

        # M1
        "m1_regulatory_agency": m1_row['ç›‘ç®¡æœºæ„'],
        "m1_pre_approval_required": m1_row['é¢„å®¡è¦æ±‚'] == 'æ˜¯',
        "m1_registration_required": m1_row['æ³¨å†Œè¦æ±‚'] == 'æ˜¯',
        "m1_complexity": m1_row['åˆè§„å¤æ‚åº¦'],
        "m1_estimated_cost_usd": None,  # å¾…è¡¥å……
        "m1_data_source": "tier2_authoritative",

        # M4
        "m4_hs_code": "2309.10.00",
        "m4_effective_tariff_rate": m4_tariff_row['å…³ç¨ç‡'],
        "m4_tariff_notes": m4_tariff_row['å¤‡æ³¨'],
        "m4_vat_rate": m4_vat_row['VAT/GSTç¨ç‡'],
        "m4_vat_notes": m4_vat_row['Notes'],
        "m4_tariff_data_source": "tier1_official",
        "m4_vat_data_source": "tier1_official",
        "m4_logistics": json.dumps(logistics),

        # M5
        "m5_last_mile_delivery_usd": m5_row['é…é€è´¹USD'],
        "m5_return_rate": 0.10,
        "m5_return_cost_rate": 0.30,
        "m5_data_source": "tier2_authoritative",

        # M6 (å…¬å¼)
        "m6_marketing_rate": 0.15,
        "m6_data_source": "tier2_authoritative",

        # M7
        "m7_payment_rate": 0.029,
        "m7_payment_fixed_usd": 0.30,
        "m7_platform_commission_rate": m7_row['å¹³å°ä½£é‡‘ç‡'],
        "m7_data_source": "tier1_official",

        # M8 (å…¬å¼)
        "m8_ga_rate": 0.03,
        "m8_data_source": "tier2_authoritative",

        # æ—¶é—´æˆ³
        "created_at": datetime.now().isoformat(),
        "updated_at": datetime.now().isoformat()
    }

    cost_factors.append(record)

# å¯¼å‡ºä¸ºJSONï¼ˆç”¨äºAppwriteå¯¼å…¥ï¼‰
with open('cost_factors_2025Q1.json', 'w', encoding='utf-8') as f:
    json.dump(cost_factors, f, ensure_ascii=False, indent=2)

print(f"âœ… å·²ç”Ÿæˆ {len(cost_factors)} æ¡æˆæœ¬å› å­è®°å½•")
```

**Step 2: å¯¼å…¥åˆ°Appwrite**

```typescript
// scripts/import-cost-factors.ts
import { Client, Databases } from 'node-appwrite';
import costFactorsData from './cost_factors_2025Q1.json';

const client = new Client()
  .setEndpoint(process.env.APPWRITE_ENDPOINT!)
  .setProject(process.env.APPWRITE_PROJECT_ID!)
  .setKey(process.env.APPWRITE_API_KEY!);

const databases = new Databases(client);

async function importCostFactors() {
  console.log('å¼€å§‹å¯¼å…¥æˆæœ¬å› å­æ•°æ®...');

  for (const record of costFactorsData) {
    try {
      await databases.createDocument(
        process.env.APPWRITE_DATABASE_ID!,
        'cost_factors',
        'unique()', // è‡ªåŠ¨ç”ŸæˆID
        record
      );
      console.log(`âœ… å¯¼å…¥æˆåŠŸ: ${record.country} ${record.country_name_cn}`);
    } catch (error) {
      console.error(`âŒ å¯¼å…¥å¤±è´¥: ${record.country}`, error);
    }
  }

  console.log('âœ… å¯¼å…¥å®Œæˆï¼');
}

importCostFactors();
```

### æ•°æ®éªŒè¯è§„åˆ™

å¯¼å…¥åéœ€è¦éªŒè¯ï¼š

1. **å®Œæ•´æ€§éªŒè¯**ï¼š19å›½æ•°æ®å…¨éƒ¨å¯¼å…¥
2. **å¿…å¡«å­—æ®µéªŒè¯**ï¼šå…³é”®å­—æ®µï¼ˆå¦‚tariff_rate, vat_rateï¼‰æ— null
3. **æ•°æ®èŒƒå›´éªŒè¯**ï¼š
   - ç¨ç‡èŒƒå›´ï¼š0-1ï¼ˆç™¾åˆ†æ¯”è½¬å°æ•°ï¼‰
   - ç‰©æµè´¹ç”¨ï¼š>0
   - åˆè§„å¤æ‚åº¦ï¼šä»…é™"æé«˜/é«˜/ä¸­/ä½"
4. **JSONæ ¼å¼éªŒè¯**ï¼šm4_logisticså­—æ®µå¯æ­£ç¡®è§£æ
5. **æ•°æ®æº¯æºéªŒè¯**ï¼šæ¯ä¸ªå­—æ®µéƒ½æœ‰data_sourceæ ‡è®°

### æ•°æ®æ›´æ–°ç­–ç•¥

**åœºæ™¯1ï¼šå…³ç¨ç¨ç‡å˜åŒ–**
1. åˆ›å»ºæ–°ç‰ˆæœ¬ï¼ˆå¦‚2025Q2ï¼‰
2. æ›´æ–°å—å½±å“å›½å®¶çš„m4_effective_tariff_rate
3. åœ¨changelogè®°å½•å˜æ›´å†…å®¹
4. è®¾ç½®is_current=trueï¼Œæ—§ç‰ˆæœ¬è®¾ä¸ºfalse

**åœºæ™¯2ï¼šæ–°å¢å›½å®¶**
1. å‡†å¤‡æ–°å›½å®¶çš„M1-M8æ•°æ®
2. è¿è¡Œå¯¼å…¥è„šæœ¬æ–°å¢è®°å½•
3. ä½¿ç”¨å½“å‰ç‰ˆæœ¬å·

**åœºæ™¯3ï¼šæ•°æ®è´¨é‡æå‡**ï¼ˆTier 3 â†’ Tier 2ï¼‰
1. æ›´æ–°å¯¹åº”å­—æ®µçš„data_source
2. æ›´æ–°æ•°å€¼ï¼ˆå¦‚æœæœ‰æ›´å‡†ç¡®çš„æ•°æ®ï¼‰
3. åœ¨changelogè®°å½•æ•°æ®æ¥æºå‡çº§

---

## 1.8 TypeScriptç±»å‹å®šä¹‰

### å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ

```typescript
// types/database.ts

/**
 * æ•°æ®æ¥æºåˆ†çº§
 */
export type DataSource =
  | 'tier1_official'        // å®˜æ–¹æ¥æºï¼Œç½®ä¿¡åº¦100%
  | 'tier2_authoritative'   // æƒå¨æ¥æºï¼Œç½®ä¿¡åº¦90%
  | 'tier3_estimated';      // ç»éªŒä¼°ç®—ï¼Œç½®ä¿¡åº¦80%

/**
 * åˆè§„å¤æ‚åº¦
 */
export type ComplianceComplexity = 'æé«˜' | 'é«˜' | 'ä¸­' | 'ä½';

/**
 * ç‰©æµæ•°æ®ç»“æ„
 */
export interface M4Logistics {
  sea_freight: {
    usd_per_kg: number;
    lcl_usd_per_cbm_min: number;
    lcl_usd_per_cbm_max: number;
    fcl_20ft_usd_min: number;
    fcl_20ft_usd_max: number;
    transit_days_min: number;
    transit_days_max: number;
    data_source: DataSource;
  };
  air_freight: {
    usd_per_kg: number;
    ddp_usd_per_kg: number;
    transit_days_min: number;
    transit_days_max: number;
    data_source: DataSource;
  };
}

/**
 * æˆæœ¬å› å­ï¼ˆå®Œæ•´ï¼‰
 */
export interface CostFactor {
  $id: string;
  country: string;
  country_name_cn: string;
  country_flag: string;
  industry: string;
  version: string;

  // M1: å¸‚åœºå‡†å…¥
  m1_regulatory_agency?: string;
  m1_pre_approval_required: boolean;
  m1_registration_required: boolean;
  m1_complexity?: ComplianceComplexity;
  m1_estimated_cost_usd?: number;
  m1_data_source: DataSource;

  // M2: æŠ€æœ¯åˆè§„
  m2_certifications_required?: string;
  m2_estimated_cost_usd?: number;
  m2_data_source: DataSource;

  // M3: ä¾›åº”é“¾æ­å»º
  m3_packaging_rate: number;
  m3_data_source: DataSource;

  // M4: è´§ç‰©ç¨è´¹
  m4_hs_code: string;
  m4_base_tariff_rate?: number;
  m4_effective_tariff_rate: number;
  m4_tariff_notes?: string;
  m4_vat_rate: number;
  m4_vat_notes?: string;
  m4_tariff_data_source: DataSource;
  m4_vat_data_source: DataSource;
  m4_logistics: string; // JSONå­—ç¬¦ä¸²ï¼Œéœ€è§£æä¸ºM4Logistics

  // M5: ç‰©æµé…é€
  m5_last_mile_delivery_usd: number;
  m5_return_rate: number;
  m5_return_cost_rate: number;
  m5_data_source: DataSource;

  // M6: è¥é”€è·å®¢
  m6_marketing_rate: number;
  m6_data_source: DataSource;

  // M7: æ”¯ä»˜æ‰‹ç»­è´¹
  m7_payment_rate: number;
  m7_payment_fixed_usd: number;
  m7_platform_commission_rate: number;
  m7_data_source: DataSource;

  // M8: è¿è¥ç®¡ç†
  m8_ga_rate: number;
  m8_data_source: DataSource;

  // å…ƒæ•°æ®
  $createdAt: string;
  $updatedAt: string;
}

/**
 * ç”¨æˆ·é¡¹ç›®
 */
export interface Project {
  $id: string;
  user_id: string;
  name: string;
  industry: string;
  target_country: string;
  sales_channel: string;
  description?: string;
  $createdAt: string;
  $updatedAt: string;
}

/**
 * è®¡ç®—è¾“å…¥ï¼ˆscopeï¼‰
 */
export interface CalculationScope {
  productName: string;
  targetCountry: string;
  salesChannel: string;
  cogsUsd: number;
  sellingPriceUsd: number;
  productWeightKg: number;
  monthlyVolume: number;

  capex: {
    m1_market_entry: number;
    m2_compliance: number;
    m3_supply_chain_setup: number;
  };

  opex: {
    shippingMethod: 'sea' | 'air';
  };
}

/**
 * è®¡ç®—ç»“æœï¼ˆcost_resultï¼‰
 */
export interface CostResult {
  capex: {
    m1: number;
    m2: number;
    m3: number;
    total: number;
  };

  opex: {
    m4_cogs: number;
    m4_tariff: number;
    m4_logistics: number;
    m4_vat: number;
    m5_last_mile: number;
    m5_return: number;
    m6_marketing: number;
    m7_payment: number;
    m7_platform_commission: number;
    m8_ga: number;
    total: number;
  };

  unit_economics: {
    revenue: number;
    cost: number;
    gross_profit: number;
    gross_margin: number;
  };

  kpis: {
    roi: number;
    payback_period_months: number;
    breakeven_price: number;
    breakeven_volume: number;
  };

  cost_breakdown: Array<{
    module: string;
    amount: number;
    percentage: number;
  }>;
}

/**
 * ç”¨æˆ·è¦†ç›–å€¼
 */
export interface UserOverrides {
  m4_effective_tariff_rate?: number;
  m4_vat_rate?: number;
  m6_marketing_rate?: number;
  override_reason?: string;
}

/**
 * è®¡ç®—è®°å½•
 */
export interface Calculation {
  $id: string;
  project_id: string;
  cost_factor_version: string;
  scope: string; // JSONå­—ç¬¦ä¸²ï¼Œéœ€è§£æä¸ºCalculationScope
  cost_result: string; // JSONå­—ç¬¦ä¸²ï¼Œéœ€è§£æä¸ºCostResult
  user_overrides?: string; // JSONå­—ç¬¦ä¸²ï¼Œéœ€è§£æä¸ºUserOverrides
  $createdAt: string;
}

/**
 * æˆæœ¬å› å­ç‰ˆæœ¬
 */
export interface CostFactorVersion {
  $id: string;
  version: string;
  effective_date: string;
  is_current: boolean;
  changelog?: string;
  $createdAt: string;
}
```

---

**ç¬¬ä¸€éƒ¨åˆ†å®Œæˆæ£€æŸ¥ç‚¹**ï¼š
- âœ… 4ä¸ªCollectionå®Œæ•´Schemaè®¾è®¡
- âœ… æ•°æ®å…³ç³»ERå›¾
- âœ… æŸ¥è¯¢åœºæ™¯ä¸ç´¢å¼•ä¼˜åŒ–
- âœ… æ•°æ®å¯¼å…¥ç­–ç•¥ï¼ˆPythonè„šæœ¬ + TypeScriptè„šæœ¬ï¼‰
- âœ… å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- âœ… æ•°æ®éªŒè¯è§„åˆ™
- âœ… æ•°æ®æ›´æ–°ç­–ç•¥

**ç¬¬ä¸€éƒ¨åˆ†æ€»ç»“**ï¼š
æ•°æ®åº“æ¶æ„è®¾è®¡å·²å®Œæˆï¼ŒåŸºäº19å›½çœŸå®æ•°æ®æ„å»ºäº†4ä¸ªCollectionï¼Œæ”¯æŒï¼š
- 19å›½Ã—M1-M8å®Œæ•´æˆæœ¬å› å­å­˜å‚¨
- æ•°æ®æº¯æºï¼ˆTier 1/2/3ï¼‰
- ç”¨æˆ·è¦†ç›–ä¸é¢„è®¾åŒºåˆ†
- ç‰ˆæœ¬ç®¡ç†ä¸å†å²æŸ¥è¯¢
- é«˜æ€§èƒ½ç´¢å¼•ä¼˜åŒ–

---

*ä¸‹ä¸€æ‰¹å°†è¾“å‡ºï¼š**ç¬¬äºŒéƒ¨åˆ† - å®Œæ•´äº”æ­¥ç•Œé¢é‡è®¾è®¡ï¼ˆStep 0-5ï¼‰***

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šå®Œæ•´äº”æ­¥ç•Œé¢é‡è®¾è®¡ï¼ˆStep 0-5ï¼‰

## 2.1 æ•´ä½“è®¾è®¡åŸåˆ™

### å½“å‰POCå­˜åœ¨çš„é—®é¢˜

1. **Step 2ç²’åº¦è¿‡ç²—**ï¼šåªæœ‰3ä¸ªå­—æ®µï¼ˆCOGSã€é›¶å”®ä»·ã€æœˆé”€é‡ï¼‰ï¼Œå®Œå…¨çœ‹ä¸åˆ°GECOMçš„M1-M8æ¨¡å—ç»“æ„
2. **æ•°æ®é¢„å¡«ç¼ºå¤±**ï¼šç”¨æˆ·é€‰æ‹©å›½å®¶åï¼Œæ²¡æœ‰è‡ªåŠ¨åŠ è½½19å›½çœŸå®æ•°æ®
3. **ç”¨æˆ·è¦†ç›–ä¸é€æ˜**ï¼šæ— æ³•åŒºåˆ†å“ªäº›å€¼æ˜¯ç³»ç»Ÿé¢„è®¾ï¼Œå“ªäº›æ˜¯ç”¨æˆ·ä¿®æ”¹
4. **Step 4æœªå®ç°**ï¼šå¤šåœºæ™¯å¯¹æ¯”åŠŸèƒ½å®Œå…¨ç¼ºå¤±
5. **AIåŠ©æ‰‹è„±èŠ‚**ï¼šStep 5çš„AIæ— æ³•æŸ¥è¯¢æˆæœ¬æ•°æ®ï¼Œä¸èƒ½æä¾›çœŸå®ROIå»ºè®®

### MVP 2.0è®¾è®¡ç›®æ ‡

**ç›®æ ‡1ï¼šä½“ç°GECOMæ–¹æ³•è®ºçš„å®Œæ•´ç²’åº¦**
- æ¯ä¸ªæ­¥éª¤éƒ½æ¸…æ™°æ˜ å°„åˆ°GECOMæ¡†æ¶çš„æŸä¸ªé˜¶æ®µ
- M1-M8å…«ä¸ªæ¨¡å—åœ¨ç•Œé¢ä¸Šå®Œæ•´å¯è§
- åŒé˜¶æ®µï¼ˆCAPEX/OPEXï¼‰åˆ’åˆ†æ¸…æ™°

**ç›®æ ‡2ï¼šæ™ºèƒ½é¢„å¡« + ç”¨æˆ·å¯æ§**
- ç”¨æˆ·é€‰æ‹©å›½å®¶åï¼Œè‡ªåŠ¨åŠ è½½19å›½æ•°æ®åº“çš„æˆæœ¬å› å­
- é¢„è®¾å€¼ä»¥"ç°è‰²åªè¯»"æ˜¾ç¤ºï¼Œä½†å¯ç‚¹å‡»"è‡ªå®šä¹‰"æŒ‰é’®è§£é”ç¼–è¾‘
- ç”¨æˆ·ä¿®æ”¹åï¼Œæ˜¾ç¤º"å·²è‡ªå®šä¹‰"æ ‡è¯†å’Œæ•°æ®æ¥æºå¯¹æ¯”

**ç›®æ ‡3ï¼šæ•°æ®æº¯æºé€æ˜åŒ–**
- æ¯ä¸ªæˆæœ¬å‚æ•°æ˜¾ç¤ºæ¥æºæ ‡ç­¾ï¼ˆTier 1/2/3ï¼‰
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†è¯´æ˜ï¼ˆå¦‚"æ¥æºï¼šç¾å›½æµ·å…³å®˜ç½‘"ï¼‰
- æ•°æ®è´¨é‡è§†è§‰åŒ–ï¼ˆTier 1ç»¿è‰²ã€Tier 2é»„è‰²ã€Tier 3ç°è‰²ï¼‰

**ç›®æ ‡4ï¼šæ¸è¿›å¼ä¿¡æ¯æŠ«éœ²**
- é»˜è®¤æ”¶èµ·è¯¦ç»†æ¨¡å—ï¼Œæ˜¾ç¤ºå…³é”®å‚æ•°å’Œè®¡ç®—ç»“æœæ‘˜è¦
- å¯å±•å¼€æŸ¥çœ‹å®Œæ•´M1-M8æ˜ç»†
- æ”¯æŒ"å¿«é€Ÿæ¨¡å¼"ï¼ˆä½¿ç”¨å…¨éƒ¨é¢„è®¾ï¼‰vs"ä¸“å®¶æ¨¡å¼"ï¼ˆé€é¡¹è‡ªå®šä¹‰ï¼‰

**ç›®æ ‡5ï¼šå®æ—¶åé¦ˆä¸éªŒè¯**
- ç”¨æˆ·ä¿®æ”¹ä»»ä½•å‚æ•°æ—¶ï¼Œå®æ—¶é‡ç®—æˆæœ¬ç»“æœ
- æ˜¾ç¤ºå‚æ•°çš„åˆç†èŒƒå›´æç¤ºï¼ˆå¦‚"å…³ç¨ç‡é€šå¸¸ä¸º0-100%"ï¼‰
- å¼‚å¸¸å€¼è­¦å‘Šï¼ˆå¦‚"æ‚¨è¾“å…¥çš„å…³ç¨ç‡55%é«˜äºå¤§å¤šæ•°å›½å®¶"ï¼‰

---

## 2.2 Step 0: é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆé‡è®¾è®¡ï¼‰

### å½“å‰POCé—®é¢˜
- å½“å‰POCæ²¡æœ‰ç‹¬ç«‹çš„Step 0ï¼Œé¡¹ç›®ä¿¡æ¯æ··åœ¨Step 1ä¸­
- ç¼ºå°‘é¡¹ç›®ä¿å­˜/åŠ è½½åŠŸèƒ½

### MVP 2.0è®¾è®¡

**ç•Œé¢ç»“æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 0: åˆ›å»ºé¡¹ç›®                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  é¡¹ç›®ä¿¡æ¯                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ é¡¹ç›®åç§° *                                   â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚ â”‚ ç›Šå®¶ä¹‹å® å® ç‰©é£Ÿå“ç¾å›½å¸‚åœºæµ‹ç®—         â”‚     â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ è¡Œä¸šç±»åˆ« *                                   â”‚    â”‚
â”‚  â”‚ â—‹ å® ç‰©é£Ÿå“ Pet Food                          â”‚    â”‚
â”‚  â”‚ â—‹ ç”µå­çƒŸ Vape (å³å°†æ”¯æŒ)                     â”‚    â”‚
â”‚  â”‚ â—‹ å…¶ä»– (è‡ªå®šä¹‰)                              â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ äº§å“æè¿° (å¯é€‰)                              â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚ â”‚ å¤©ç„¶æ— è°·ç‹—ç²®ï¼Œé’ˆå¯¹æˆçŠ¬ï¼Œ2kgåŒ…è£…    â”‚     â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  æˆ–ä»å†å²é¡¹ç›®åŠ è½½ï¼š                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [ğŸ“] ç›Šå®¶ä¹‹å® -ç¾å›½å¸‚åœº     2025-01-05        â”‚    â”‚
â”‚  â”‚ [ğŸ“] ç›Šå®¶ä¹‹å® -è¶Šå—å¸‚åœº     2025-01-03        â”‚    â”‚
â”‚  â”‚ [ğŸ“] ç›Šå®¶ä¹‹å® -å¾·å›½å¸‚åœº     2025-01-01        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  [å–æ¶ˆ] [ä¸‹ä¸€æ­¥ï¼šä¸šåŠ¡åœºæ™¯å®šä¹‰ â†’]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè®¾è®¡ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| é¡¹ç›®åç§° | string | æ˜¯ | é¡¹ç›®æ ‡è¯†ï¼Œæ”¯æŒä¸­è‹±æ–‡ |
| è¡Œä¸šç±»åˆ« | enum | æ˜¯ | pet_food / vape / other |
| äº§å“æè¿° | textarea | å¦ | å¯é€‰çš„è¯¦ç»†æè¿° |

**æ•°æ®æµï¼š**
```
ç”¨æˆ·è¾“å…¥ â†’ åˆ›å»ºProjectè®°å½• â†’ å­˜å‚¨åˆ°Appwrite projectsè¡¨ â†’ è¿›å…¥Step 1
```

**ç»„ä»¶ä¼ªä»£ç ï¼š**
```typescript
// components/wizard/Step0ProjectInfo.tsx
interface Step0State {
  projectName: string;
  industry: 'pet_food' | 'vape' | 'other';
  description: string;
}

export function Step0ProjectInfo() {
  const [state, setState] = useState<Step0State>({
    projectName: '',
    industry: 'pet_food',
    description: ''
  });

  const [existingProjects, setExistingProjects] = useState<Project[]>([]);

  useEffect(() => {
    // åŠ è½½ç”¨æˆ·çš„å†å²é¡¹ç›®åˆ—è¡¨
    loadExistingProjects();
  }, []);

  const handleNext = async () => {
    // éªŒè¯å¿…å¡«å­—æ®µ
    if (!state.projectName) {
      alert('è¯·è¾“å…¥é¡¹ç›®åç§°');
      return;
    }

    // åˆ›å»ºé¡¹ç›®è®°å½•
    const project = await createProject({
      name: state.projectName,
      industry: state.industry,
      description: state.description
    });

    // å­˜å‚¨project_idåˆ°å‘å¯¼çŠ¶æ€
    wizardState.projectId = project.$id;

    // è¿›å…¥Step 1
    goToNextStep();
  };

  return (
    <div className="space-y-6">
      <h2>Step 0: åˆ›å»ºé¡¹ç›®</h2>

      {/* é¡¹ç›®åŸºæœ¬ä¿¡æ¯è¡¨å• */}
      <Card>
        <CardHeader>
          <CardTitle>é¡¹ç›®ä¿¡æ¯</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            <div>
              <Label htmlFor="project-name">é¡¹ç›®åç§° *</Label>
              <Input
                id="project-name"
                value={state.projectName}
                onChange={(e) => setState({...state, projectName: e.target.value})}
                placeholder="ä¾‹å¦‚ï¼šç›Šå®¶ä¹‹å® å® ç‰©é£Ÿå“ç¾å›½å¸‚åœºæµ‹ç®—"
              />
            </div>

            <div>
              <Label>è¡Œä¸šç±»åˆ« *</Label>
              <RadioGroup value={state.industry} onValueChange={(v) => setState({...state, industry: v})}>
                <div className="flex items-center space-x-2">
                  <RadioGroupItem value="pet_food" id="pet_food" />
                  <Label htmlFor="pet_food">å® ç‰©é£Ÿå“ Pet Food</Label>
                </div>
                <div className="flex items-center space-x-2">
                  <RadioGroupItem value="vape" id="vape" />
                  <Label htmlFor="vape">ç”µå­çƒŸ Vape (å³å°†æ”¯æŒ)</Label>
                </div>
              </RadioGroup>
            </div>

            <div>
              <Label htmlFor="description">äº§å“æè¿° (å¯é€‰)</Label>
              <Textarea
                id="description"
                value={state.description}
                onChange={(e) => setState({...state, description: e.target.value})}
                placeholder="ä¾‹å¦‚ï¼šå¤©ç„¶æ— è°·ç‹—ç²®ï¼Œé’ˆå¯¹æˆçŠ¬ï¼Œ2kgåŒ…è£…"
              />
            </div>
          </div>
        </CardContent>
      </Card>

      {/* æˆ–åŠ è½½å†å²é¡¹ç›® */}
      {existingProjects.length > 0 && (
        <Card>
          <CardHeader>
            <CardTitle>æˆ–ä»å†å²é¡¹ç›®åŠ è½½</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-2">
              {existingProjects.map(project => (
                <div
                  key={project.$id}
                  className="flex items-center justify-between p-3 border rounded hover:bg-gray-50 cursor-pointer"
                  onClick={() => loadProject(project.$id)}
                >
                  <span>ğŸ“ {project.name}</span>
                  <span className="text-sm text-gray-500">{formatDate(project.$createdAt)}</span>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      )}

      {/* åº•éƒ¨æŒ‰é’® */}
      <div className="flex justify-between">
        <Button variant="outline" onClick={() => router.push('/')}>å–æ¶ˆ</Button>
        <Button onClick={handleNext}>ä¸‹ä¸€æ­¥ï¼šä¸šåŠ¡åœºæ™¯å®šä¹‰ â†’</Button>
      </div>
    </div>
  );
}
```

---

## 2.3 Step 1: ä¸šåŠ¡åœºæ™¯å®šä¹‰ï¼ˆé‡è®¾è®¡ï¼‰

### å½“å‰POCé—®é¢˜
- åªæœ‰ç®€å•çš„å›½å®¶/æ¸ é“é€‰æ‹©
- æ²¡æœ‰åˆ©ç”¨19å›½æ•°æ®åº“ï¼Œå›½å®¶åˆ—è¡¨æ˜¯ç¡¬ç¼–ç çš„
- ç¼ºå°‘äº§å“åŸºæœ¬å‚æ•°ï¼ˆé‡é‡ã€åŒ…è£…ç­‰ï¼‰

### MVP 2.0è®¾è®¡

**ç•Œé¢ç»“æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: ä¸šåŠ¡åœºæ™¯å®šä¹‰                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  äº§å“åŸºæœ¬å‚æ•°                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ äº§å“åç§°: ç›Šå®¶ä¹‹å® å¤©ç„¶æ— è°·ç‹—ç²® 2kg          â”‚    â”‚
â”‚  â”‚ äº§å“é‡é‡: [2.0] kg                           â”‚    â”‚
â”‚  â”‚ å•†å“æˆæœ¬(COGS): [$10.00] USD/å•ä½            â”‚    â”‚
â”‚  â”‚ ç›®æ ‡é›¶å”®ä»·: [$25.00] USD/å•ä½                â”‚    â”‚
â”‚  â”‚ é¢„è®¡æœˆé”€é‡: [1000] å•ä½                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  ç›®æ ‡å¸‚åœºé€‰æ‹© *                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [æœç´¢å›½å®¶...]                                â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ åŒ—ç¾æ´²                                       â”‚    â”‚
â”‚  â”‚  ğŸ‡ºğŸ‡¸ ç¾å›½ United States                     â”‚    â”‚
â”‚  â”‚  ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§ Canada                          â”‚    â”‚
â”‚  â”‚  ğŸ‡²ğŸ‡½ å¢¨è¥¿å“¥ Mexico                          â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ æ¬§æ´²                                         â”‚    â”‚
â”‚  â”‚  ğŸ‡©ğŸ‡ª å¾·å›½ Germany                           â”‚    â”‚
â”‚  â”‚  ğŸ‡¬ğŸ‡§ è‹±å›½ United Kingdom                    â”‚    â”‚
â”‚  â”‚  ğŸ‡«ğŸ‡· æ³•å›½ France                            â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ äºšæ´²                                         â”‚    â”‚
â”‚  â”‚  ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ Singapore                       â”‚    â”‚
â”‚  â”‚  ğŸ‡»ğŸ‡³ è¶Šå— Vietnam                           â”‚    â”‚
â”‚  â”‚  ğŸ‡¹ğŸ‡­ æ³°å›½ Thailand                          â”‚    â”‚
â”‚  â”‚  ... (å…±19å›½)                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  å·²é€‰æ‹©: ğŸ‡ºğŸ‡¸ ç¾å›½ United States                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ•°æ®å¯ç”¨æ€§:                                 â”‚    â”‚
â”‚  â”‚  â€¢ M1 å¸‚åœºå‡†å…¥: âœ… (Tier 2)                  â”‚    â”‚
â”‚  â”‚  â€¢ M4 å…³ç¨ç¨è´¹: âœ… (Tier 1)                  â”‚    â”‚
â”‚  â”‚  â€¢ M5 ç‰©æµé…é€: âœ… (Tier 2)                  â”‚    â”‚
â”‚  â”‚  â€¢ M7 å¹³å°ä½£é‡‘: âœ… (Tier 1)                  â”‚    â”‚
â”‚  â”‚  â€¢ å…¶ä»–æ¨¡å—: âœ…                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  é”€å”®æ¸ é“ *                                          â”‚
â”‚  â—‹ ç‹¬ç«‹ç«™ (Shopify + Stripe)                         â”‚
â”‚  â—‹ äºšé©¬é€Š (FBA)                                      â”‚
â”‚  â—‹ TikTok Shop                                       â”‚
â”‚  â—‹ å…¶ä»–å¹³å°                                          â”‚
â”‚                                                       â”‚
â”‚  è·¨å¢ƒæ¨¡å¼ *                                          â”‚
â”‚  â—‹ ç›´é‚® (Direct Mail)                                â”‚
â”‚  â—‹ æµ·å¤–ä»“ (Overseas Warehouse)                       â”‚
â”‚  â—‹ FBA (Fulfillment by Amazon)                       â”‚
â”‚                                                       â”‚
â”‚  [â† ä¸Šä¸€æ­¥] [ä¸‹ä¸€æ­¥ï¼šæˆæœ¬å‚æ•°é…ç½® â†’]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½ï¼š19å›½åŠ¨æ€åŠ è½½**

```typescript
// components/wizard/Step1Scope.tsx
interface Step1State {
  productName: string;
  productWeightKg: number;
  cogsUsd: number;
  sellingPriceUsd: number;
  monthlyVolume: number;
  targetCountry: string; // å›½å®¶ä»£ç ï¼Œå¦‚"US"
  salesChannel: 'shopify' | 'amazon' | 'tiktok' | 'other';
  crossBorderMode: 'direct_mail' | 'overseas_warehouse' | 'fba';
}

export function Step1Scope() {
  const [state, setState] = useState<Step1State>({...});
  const [countries, setCountries] = useState<CostFactor[]>([]);
  const [selectedCountryData, setSelectedCountryData] = useState<CostFactor | null>(null);

  useEffect(() => {
    // ä»cost_factorsè¡¨åŠ è½½19å›½æ•°æ®
    loadCountries();
  }, []);

  const loadCountries = async () => {
    const result = await databases.listDocuments(
      DATABASE_ID,
      'cost_factors',
      [
        Query.equal('industry', wizardState.industry),
        Query.equal('version', '2025Q1'), // å½“å‰ç‰ˆæœ¬
        Query.orderAsc('country_name_cn')
      ]
    );
    setCountries(result.documents as CostFactor[]);
  };

  const handleCountrySelect = async (countryCode: string) => {
    setState({...state, targetCountry: countryCode});

    // åŠ è½½è¯¥å›½å®¶çš„å®Œæ•´æˆæœ¬å› å­æ•°æ®
    const countryData = countries.find(c => c.country === countryCode);
    setSelectedCountryData(countryData);

    // å­˜å‚¨åˆ°å‘å¯¼çŠ¶æ€ï¼ˆä¾›Step 2ä½¿ç”¨ï¼‰
    wizardState.costFactorData = countryData;
  };

  return (
    <div className="space-y-6">
      <h2>Step 1: ä¸šåŠ¡åœºæ™¯å®šä¹‰</h2>

      {/* äº§å“åŸºæœ¬å‚æ•° */}
      <Card>
        <CardHeader><CardTitle>äº§å“åŸºæœ¬å‚æ•°</CardTitle></CardHeader>
        <CardContent>
          <div className="grid grid-cols-2 gap-4">
            <div>
              <Label>äº§å“åç§°</Label>
              <Input value={state.productName} onChange={...} />
            </div>
            <div>
              <Label>äº§å“é‡é‡ (kg)</Label>
              <Input type="number" value={state.productWeightKg} onChange={...} />
            </div>
            <div>
              <Label>å•†å“æˆæœ¬(COGS) USD/å•ä½</Label>
              <Input type="number" value={state.cogsUsd} onChange={...} />
            </div>
            <div>
              <Label>ç›®æ ‡é›¶å”®ä»· USD/å•ä½</Label>
              <Input type="number" value={state.sellingPriceUsd} onChange={...} />
            </div>
            <div>
              <Label>é¢„è®¡æœˆé”€é‡ (å•ä½)</Label>
              <Input type="number" value={state.monthlyVolume} onChange={...} />
            </div>
          </div>
        </CardContent>
      </Card>

      {/* ç›®æ ‡å¸‚åœºé€‰æ‹©ï¼ˆ19å›½ï¼‰ */}
      <Card>
        <CardHeader><CardTitle>ç›®æ ‡å¸‚åœºé€‰æ‹©</CardTitle></CardHeader>
        <CardContent>
          <CountrySelector
            countries={countries}
            selectedCountry={state.targetCountry}
            onSelect={handleCountrySelect}
          />

          {/* æ•°æ®å¯ç”¨æ€§æç¤º */}
          {selectedCountryData && (
            <Alert className="mt-4">
              <AlertTitle>âœ… è¯¥å›½å®¶æ•°æ®å®Œæ•´</AlertTitle>
              <AlertDescription>
                <ul className="space-y-1 text-sm">
                  <li>â€¢ M1 å¸‚åœºå‡†å…¥: {selectedCountryData.m1_complexity}
                    <Badge variant={getTierVariant(selectedCountryData.m1_data_source)}>
                      {selectedCountryData.m1_data_source}
                    </Badge>
                  </li>
                  <li>â€¢ M4 å…³ç¨: {(selectedCountryData.m4_effective_tariff_rate * 100).toFixed(1)}%
                    <Badge variant="success">{selectedCountryData.m4_tariff_data_source}</Badge>
                  </li>
                  <li>â€¢ M4 VAT: {(selectedCountryData.m4_vat_rate * 100).toFixed(1)}%
                    <Badge variant="success">{selectedCountryData.m4_vat_data_source}</Badge>
                  </li>
                  <li>â€¢ M5 é…é€è´¹: ${selectedCountryData.m5_last_mile_delivery_usd}
                    <Badge>{selectedCountryData.m5_data_source}</Badge>
                  </li>
                </ul>
              </AlertDescription>
            </Alert>
          )}
        </CardContent>
      </Card>

      {/* é”€å”®æ¸ é“å’Œè·¨å¢ƒæ¨¡å¼ */}
      <Card>
        <CardHeader><CardTitle>é”€å”®æ¸ é“ä¸è·¨å¢ƒæ¨¡å¼</CardTitle></CardHeader>
        <CardContent>
          {/* RadioGroup for salesChannel and crossBorderMode */}
        </CardContent>
      </Card>

      {/* åº•éƒ¨å¯¼èˆª */}
      <div className="flex justify-between">
        <Button variant="outline" onClick={goToPrevStep}>â† ä¸Šä¸€æ­¥</Button>
        <Button onClick={handleNext}>ä¸‹ä¸€æ­¥ï¼šæˆæœ¬å‚æ•°é…ç½® â†’</Button>
      </div>
    </div>
  );
}
```

**CountrySelectorç»„ä»¶ï¼š**
```typescript
// components/CountrySelector.tsx
interface CountrySelectorProps {
  countries: CostFactor[];
  selectedCountry: string;
  onSelect: (countryCode: string) => void;
}

export function CountrySelector({ countries, selectedCountry, onSelect }: CountrySelectorProps) {
  const [searchTerm, setSearchTerm] = useState('');

  // æŒ‰å¤§æ´²åˆ†ç»„
  const grouped = {
    'åŒ—ç¾æ´²': countries.filter(c => ['US', 'CA', 'MX'].includes(c.country)),
    'æ¬§æ´²': countries.filter(c => ['DE', 'GB', 'FR'].includes(c.country)),
    'äºšæ´²': countries.filter(c => ['SG', 'VN', 'TH', 'MY', 'PH', 'ID', 'IN', 'JP', 'KR'].includes(c.country)),
    'å¤§æ´‹æ´²': countries.filter(c => ['AU'].includes(c.country)),
    'ä¸­ä¸œ': countries.filter(c => ['SA', 'AE'].includes(c.country)),
    'å—ç¾æ´²': countries.filter(c => ['BR'].includes(c.country)),
  };

  // æœç´¢è¿‡æ»¤
  const filtered = searchTerm
    ? countries.filter(c =>
        c.country_name_cn.includes(searchTerm) ||
        c.country.toLowerCase().includes(searchTerm.toLowerCase())
      )
    : null;

  return (
    <div className="space-y-4">
      {/* æœç´¢æ¡† */}
      <Input
        placeholder="æœç´¢å›½å®¶..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
      />

      {/* å›½å®¶åˆ—è¡¨ï¼ˆåˆ†ç»„æˆ–æœç´¢ç»“æœï¼‰ */}
      <ScrollArea className="h-64 border rounded p-4">
        {filtered ? (
          // æœç´¢ç»“æœ
          <div className="space-y-2">
            {filtered.map(country => (
              <CountryItem
                key={country.country}
                country={country}
                isSelected={country.country === selectedCountry}
                onClick={() => onSelect(country.country)}
              />
            ))}
          </div>
        ) : (
          // æŒ‰å¤§æ´²åˆ†ç»„
          <div className="space-y-4">
            {Object.entries(grouped).map(([continent, items]) => (
              <div key={continent}>
                <h4 className="font-semibold text-sm text-gray-600 mb-2">{continent}</h4>
                <div className="space-y-1">
                  {items.map(country => (
                    <CountryItem
                      key={country.country}
                      country={country}
                      isSelected={country.country === selectedCountry}
                      onClick={() => onSelect(country.country)}
                    />
                  ))}
                </div>
              </div>
            ))}
          </div>
        )}
      </ScrollArea>
    </div>
  );
}

function CountryItem({ country, isSelected, onClick }: {...}) {
  return (
    <div
      className={`flex items-center space-x-2 p-2 rounded cursor-pointer hover:bg-gray-50 ${
        isSelected ? 'bg-blue-50 border-blue-300' : ''
      }`}
      onClick={onClick}
    >
      <span className="text-2xl">{country.country_flag}</span>
      <span className="font-medium">{country.country_name_cn}</span>
      <span className="text-sm text-gray-500">{country.country}</span>
      {isSelected && <CheckCircle className="ml-auto text-blue-500" />}
    </div>
  );
}
```

---

## 2.4 Step 2: æˆæœ¬å‚æ•°é…ç½®ï¼ˆå®Œæ•´M1-M8å±•ç¤ºï¼‰â­æ ¸å¿ƒ

### å½“å‰POCçš„è‡´å‘½é—®é¢˜

**å½“å‰POCçš„Step 2ç•Œé¢**ï¼š
```
å•†å“æˆæœ¬(COGS): [è¾“å…¥æ¡†]
ç›®æ ‡é›¶å”®ä»·: [è¾“å…¥æ¡†]
é¢„è®¡æœˆé”€é‡: [è¾“å…¥æ¡†]
```
ä»…3ä¸ªå­—æ®µï¼Œå®Œå…¨çœ‹ä¸åˆ°GECOMæ–¹æ³•è®ºï¼

### MVP 2.0æ ¸å¿ƒè®¾è®¡ï¼šå®Œæ•´M1-M8æ¨¡å—å±•ç¤º

**è®¾è®¡æ€è·¯**ï¼š
1. **åŒé˜¶æ®µåˆ†ç»„**ï¼šCAPEXï¼ˆM1-M3ï¼‰å’ŒOPEXï¼ˆM4-M8ï¼‰æ¸…æ™°åˆ†ç¦»
2. **å¯æŠ˜å é¢æ¿**ï¼šæ¯ä¸ªæ¨¡å—å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†å‚æ•°
3. **ä¸‰ç§æ•°æ®çŠ¶æ€**ï¼š
   - ğŸŸ¢ ç³»ç»Ÿé¢„è®¾ï¼ˆåªè¯»ï¼Œç°è‰²èƒŒæ™¯ï¼‰
   - ğŸŸ¡ å¯è‡ªå®šä¹‰ï¼ˆç‚¹å‡»"è‡ªå®šä¹‰"æŒ‰é’®è§£é”ï¼‰
   - ğŸ”µ å·²è‡ªå®šä¹‰ï¼ˆç”¨æˆ·ä¿®æ”¹åï¼Œæ˜¾ç¤ºè“è‰²æ ‡è¯†ï¼‰
4. **æ•°æ®æº¯æºå¯è§†åŒ–**ï¼šæ¯ä¸ªå‚æ•°æ˜¾ç¤ºTier 1/2/3å¾½ç« 
5. **å®æ—¶è®¡ç®—é¢„è§ˆ**ï¼šä¿®æ”¹ä»»ä½•å‚æ•°æ—¶ï¼Œå³ä¾§å®æ—¶æ˜¾ç¤ºæˆæœ¬å½±å“

**ç•Œé¢ç»“æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: æˆæœ¬å‚æ•°é…ç½®                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ã€å¿«é€Ÿæ¨¡å¼ã€‘â—‹ ä½¿ç”¨å…¨éƒ¨é¢„è®¾  â—ã€ä¸“å®¶æ¨¡å¼ã€‘é€é¡¹è‡ªå®šä¹‰               â”‚
â”‚                                                                      â”‚
â”‚  ç›®æ ‡å¸‚åœº: ğŸ‡ºğŸ‡¸ ç¾å›½ | æ•°æ®ç‰ˆæœ¬: 2025Q1                              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  é˜¶æ®µ 0-1: CAPEXï¼ˆä¸€æ¬¡æ€§å¯åŠ¨æˆæœ¬ï¼‰                            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M1: å¸‚åœºå‡†å…¥ï¼ˆMarket Entryï¼‰                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ç›‘ç®¡æœºæ„: FDA, APHIS [Tier 2] [åªè¯»]                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ åˆè§„å¤æ‚åº¦: é«˜ [Tier 2] [åªè¯»]                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ é¢„ä¼°å‡†å…¥æˆæœ¬: [$5,000] USD   [è‡ªå®šä¹‰]                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   è¯´æ˜: åŒ…æ‹¬å…¬å¸æ³¨å†Œã€æ³•åŠ¡å’¨è¯¢ã€ç¨åŠ¡ç™»è®°               â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M2: æŠ€æœ¯åˆè§„ï¼ˆTechnical Complianceï¼‰                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ è®¤è¯è¦æ±‚: AAFCOè®¤è¯ã€FDAåˆè§„ [Tier 2] [åªè¯»]          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ é¢„ä¼°è®¤è¯æˆæœ¬: [$3,000] USD   [è‡ªå®šä¹‰]                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   è¯´æ˜: äº§å“æ£€æµ‹ã€è®¤è¯ç”³è¯·è´¹ç”¨                         â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M3: ä¾›åº”é“¾æ­å»ºï¼ˆSupply Chain Setupï¼‰                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ åŒ…è£…æœ¬åœ°åŒ–è´¹ç‡: 2.0% [Tier 2] [åªè¯»]                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   è®¡ç®—: $25.00 Ã— 2% = $0.50/å•ä½                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ åˆå§‹åº“å­˜æŠ•èµ„: [$10,000] USD   [è‡ªå®šä¹‰]                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ ä»“å‚¨æŠ¼é‡‘: [$5,000] USD   [è‡ªå®šä¹‰]                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  ğŸ’° CAPEXå°è®¡: $23,000 USD                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  é˜¶æ®µ 1-N: OPEXï¼ˆå•ä½è¿è¥æˆæœ¬ï¼‰                               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M4: è´§ç‰©ç¨è´¹ï¼ˆGoods & Taxï¼‰                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“¦ å•†å“æˆæœ¬ (COGS)                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    [$10.00] USD/å•ä½   [ç”¨æˆ·è¾“å…¥]                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸš¢ å¤´ç¨‹ç‰©æµ                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è¿è¾“æ–¹å¼: â—‹ æµ·è¿  â— ç©ºè¿                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ç©ºè¿è´¹ç‡: $4.5/kg [Tier 2] [åªè¯»]                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    äº§å“é‡é‡: 2.0 kg                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $4.5 Ã— 2.0 = $9.00/å•ä½                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ’° è¿›å£å…³ç¨                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    å…³ç¨ç¨ç‡: 55.0% [Tier 1] [åªè¯»] [âš ï¸ å¼‚å¸¸é«˜]         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    å¤‡æ³¨: 10%äº’æƒ å…³ç¨ + 25% Section 301 + 20%é™„åŠ        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $10.00 Ã— 55% = $5.50/å•ä½                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    [ğŸ”§ è‡ªå®šä¹‰] â† ç‚¹å‡»å¯è¦†ç›–ï¼ˆå¦‚FTAä¼˜æƒ ï¼‰               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“Š å¢å€¼ç¨ (VAT)                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    VATç¨ç‡: 6.0% [Tier 1] [åªè¯»]                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    å¤‡æ³¨: å·ç¨å·®å¼‚ï¼ŒèŒƒå›´0-10%+                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: ($10 + $9 + $5.5) Ã— 6% = $1.47/å•ä½           â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ M4å°è®¡: $25.97/å•ä½                                     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M5: ç‰©æµé…é€ï¼ˆLogistics & Deliveryï¼‰                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸšš å°¾ç¨‹é…é€è´¹ (å¦‚FBA)                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    é…é€è´¹: $7.50/å•ä½ [Tier 2] [åªè¯»]                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â†©ï¸ é€†å‘ç‰©æµæˆæœ¬                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    é€€è´§ç‡: 10.0% [Tier 2] [åªè¯»]                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    é€€è´§å¤„ç†æˆæœ¬ç‡: 30.0% [Tier 2] [åªè¯»]               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $25.00 Ã— 30% Ã— 10% = $0.75/å•ä½               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ M5å°è®¡: $8.25/å•ä½                                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M6: è¥é”€è·å®¢ï¼ˆMarketing & Acquisitionï¼‰                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“¢ è¥é”€è´¹ç‡                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è´¹ç‡: 15.0% [Tier 2] [åªè¯»]                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è¯´æ˜: ACOS 20-40%, ACOAS 15-20%è¡Œä¸šå‡å€¼             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $25.00 Ã— 15% = $3.75/å•ä½                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    [ğŸ”§ è‡ªå®šä¹‰] â† å¯æ ¹æ®å®é™…CACè°ƒæ•´                     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M7: æ”¯ä»˜æ‰‹ç»­è´¹ï¼ˆPayment Processingï¼‰                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ’³ æ”¯ä»˜ç½‘å…³è´¹ç”¨                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è´¹ç‡: 2.9% + $0.30 [Tier 1] [åªè¯»]                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è¯´æ˜: Stripe/PayPalæ ‡å‡†è´¹ç‡                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $25.00 Ã— 2.9% + $0.30 = $1.03/å•ä½            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸª å¹³å°ä½£é‡‘                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ä½£é‡‘ç‡: 15.0% [Tier 1] [åªè¯»]                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è¯´æ˜: ç¾å›½/åŠ æ‹¿å¤§/æ¬§æ´²æ ‡å‡†ä½£é‡‘                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $25.00 Ã— 15% = $3.75/å•ä½                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ M7å°è®¡: $4.78/å•ä½                                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â–¼ M8: è¿è¥ç®¡ç†ï¼ˆOperations & Managementï¼‰                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ‘¥ æœ¬åœ°äººåŠ›ä¸è¡Œæ”¿ (G&A)                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è´¹ç‡: 3.0% [Tier 2] [åªè¯»]                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è¯´æ˜: æœ¬åœ°å®¢æœç­‰è¿è¥äººå‘˜æˆæœ¬                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    è®¡ç®—: $25.00 Ã— 3% = $0.75/å•ä½                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  ğŸ’° OPEXå°è®¡: $43.50/å•ä½                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“Š æˆæœ¬é¢„è§ˆï¼ˆå®æ—¶è®¡ç®—ï¼‰                                      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  å•ä½æ”¶å…¥: $25.00                                             â”‚ â”‚
â”‚  â”‚  å•ä½æˆæœ¬: $43.50                                             â”‚ â”‚
â”‚  â”‚  å•ä½æ¯›åˆ©: -$18.50  âŒ äºæŸ                                   â”‚ â”‚
â”‚  â”‚  æ¯›åˆ©ç‡: -74.0%     âš ï¸ ä¸¥é‡äºæŸ                              â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  å»ºè®®: å½“å‰å®šä»·ä¸‹è¯¥å¸‚åœºä¸å¯è¡Œï¼Œå»ºè®®ï¼š                          â”‚ â”‚
â”‚  â”‚  1. æé«˜é›¶å”®ä»·è‡³ $73+ å®ç°ç›ˆäºå¹³è¡¡                             â”‚ â”‚
â”‚  â”‚  2. é€‰æ‹©ä½æˆæœ¬å¸‚åœºï¼ˆå¦‚è¶Šå—/æ³°å›½ï¼‰                              â”‚ â”‚
â”‚  â”‚  3. ä¼˜åŒ–ç‰©æµæ–¹å¼ï¼ˆç©ºè¿æ”¹æµ·è¿å¯èŠ‚çœ$9/å•ä½ï¼‰                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  [â† ä¸Šä¸€æ­¥] [ä¿å­˜è‰ç¨¿] [ä¸‹ä¸€æ­¥ï¼šæŸ¥çœ‹ç»“æœ â†’]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒåŠŸèƒ½å®ç°

#### åŠŸèƒ½1ï¼šæ™ºèƒ½é¢„å¡«ç³»ç»Ÿ

```typescript
// components/wizard/Step2CostParams.tsx
interface CostParamsState {
  // ä»cost_factorsé¢„å¡«çš„å€¼
  presetValues: CostFactor;

  // ç”¨æˆ·è¦†ç›–çš„å€¼
  userOverrides: Partial<CostFactor>;

  // å„æ¨¡å—çš„å±•å¼€çŠ¶æ€
  expandedModules: {
    m1: boolean;
    m2: boolean;
    m3: boolean;
    m4: boolean;
    m5: boolean;
    m6: boolean;
    m7: boolean;
    m8: boolean;
  };

  // å¿«é€Ÿæ¨¡å¼ vs ä¸“å®¶æ¨¡å¼
  mode: 'quick' | 'expert';
}

export function Step2CostParams() {
  const [state, setState] = useState<CostParamsState>({
    presetValues: wizardState.costFactorData, // ä»Step 1ä¼ å…¥
    userOverrides: {},
    expandedModules: {
      m1: false, m2: false, m3: false,
      m4: true,  // é»˜è®¤å±•å¼€M4ï¼ˆæœ€é‡è¦ï¼‰
      m5: false, m6: false, m7: false, m8: false
    },
    mode: 'quick'
  });

  // è·å–æœ‰æ•ˆå€¼ï¼ˆç”¨æˆ·è¦†ç›– > ç³»ç»Ÿé¢„è®¾ï¼‰
  const getEffectiveValue = (field: keyof CostFactor) => {
    return state.userOverrides[field] ?? state.presetValues[field];
  };

  // å®æ—¶è®¡ç®—æˆæœ¬ç»“æœ
  const [costPreview, setCostPreview] = useState<CostResult | null>(null);

  useEffect(() => {
    // æ¯æ¬¡å‚æ•°å˜åŒ–æ—¶é‡æ–°è®¡ç®—
    const result = calculateCostPreview();
    setCostPreview(result);
  }, [state.userOverrides, wizardState.scope]);

  const calculateCostPreview = (): CostResult => {
    const scope = wizardState.scope;
    const cogsUsd = scope.cogsUsd;
    const sellingPriceUsd = scope.sellingPriceUsd;
    const productWeightKg = scope.productWeightKg;
    const shippingMethod = scope.opex.shippingMethod;

    // M4è®¡ç®—
    const logistics = JSON.parse(getEffectiveValue('m4_logistics')) as M4Logistics;
    const logisticsCost = shippingMethod === 'sea'
      ? logistics.sea_freight.usd_per_kg * productWeightKg
      : logistics.air_freight.usd_per_kg * productWeightKg;

    const tariffRate = getEffectiveValue('m4_effective_tariff_rate');
    const tariffCost = cogsUsd * tariffRate;

    const vatRate = getEffectiveValue('m4_vat_rate');
    const vatCost = (cogsUsd + logisticsCost + tariffCost) * vatRate;

    const m4Total = cogsUsd + logisticsCost + tariffCost + vatCost;

    // M5è®¡ç®—
    const lastMileDelivery = getEffectiveValue('m5_last_mile_delivery_usd');
    const returnCost = sellingPriceUsd * getEffectiveValue('m5_return_cost_rate') * getEffectiveValue('m5_return_rate');
    const m5Total = lastMileDelivery + returnCost;

    // M6è®¡ç®—
    const marketingCost = sellingPriceUsd * getEffectiveValue('m6_marketing_rate');

    // M7è®¡ç®—
    const paymentGateway = sellingPriceUsd * getEffectiveValue('m7_payment_rate') + getEffectiveValue('m7_payment_fixed_usd');
    const platformCommission = sellingPriceUsd * getEffectiveValue('m7_platform_commission_rate');
    const m7Total = paymentGateway + platformCommission;

    // M8è®¡ç®—
    const gaCost = sellingPriceUsd * getEffectiveValue('m8_ga_rate');

    const opexTotal = m4Total + m5Total + marketingCost + m7Total + gaCost;

    // å•ä½ç»æµæ¨¡å‹
    const grossProfit = sellingPriceUsd - opexTotal;
    const grossMargin = (grossProfit / sellingPriceUsd) * 100;

    return {
      opex: {
        m4_cogs: cogsUsd,
        m4_tariff: tariffCost,
        m4_logistics: logisticsCost,
        m4_vat: vatCost,
        m5_last_mile: lastMileDelivery,
        m5_return: returnCost,
        m6_marketing: marketingCost,
        m7_payment: paymentGateway,
        m7_platform_commission: platformCommission,
        m8_ga: gaCost,
        total: opexTotal
      },
      unit_economics: {
        revenue: sellingPriceUsd,
        cost: opexTotal,
        gross_profit: grossProfit,
        gross_margin: grossMargin
      },
      // ... å…¶ä»–KPI
    } as CostResult;
  };

  return (
    <div className="grid grid-cols-3 gap-6">
      {/* å·¦ä¾§2/3ï¼šå‚æ•°é…ç½® */}
      <div className="col-span-2 space-y-6">
        <div className="flex items-center justify-between">
          <h2>Step 2: æˆæœ¬å‚æ•°é…ç½®</h2>

          {/* æ¨¡å¼åˆ‡æ¢ */}
          <Tabs value={state.mode} onValueChange={(v) => setState({...state, mode: v as 'quick' | 'expert'})}>
            <TabsList>
              <TabsTrigger value="quick">å¿«é€Ÿæ¨¡å¼</TabsTrigger>
              <TabsTrigger value="expert">ä¸“å®¶æ¨¡å¼</TabsTrigger>
            </TabsList>
          </Tabs>
        </div>

        {/* CAPEX */}
        <Card>
          <CardHeader>
            <CardTitle>é˜¶æ®µ 0-1: CAPEXï¼ˆä¸€æ¬¡æ€§å¯åŠ¨æˆæœ¬ï¼‰</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* M1 */}
            <M1Module
              presetData={state.presetValues}
              userOverrides={state.userOverrides}
              expanded={state.expandedModules.m1}
              onToggle={() => toggleModule('m1')}
              onOverride={(field, value) => handleOverride(field, value)}
              mode={state.mode}
            />

            {/* M2, M3 ç±»ä¼¼ */}
          </CardContent>
        </Card>

        {/* OPEX */}
        <Card>
          <CardHeader>
            <CardTitle>é˜¶æ®µ 1-N: OPEXï¼ˆå•ä½è¿è¥æˆæœ¬ï¼‰</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* M4 */}
            <M4Module
              presetData={state.presetValues}
              userOverrides={state.userOverrides}
              scope={wizardState.scope}
              expanded={state.expandedModules.m4}
              onToggle={() => toggleModule('m4')}
              onOverride={(field, value) => handleOverride(field, value)}
              mode={state.mode}
            />

            {/* M5-M8 ç±»ä¼¼ */}
          </CardContent>
        </Card>
      </div>

      {/* å³ä¾§1/3ï¼šå®æ—¶æˆæœ¬é¢„è§ˆ */}
      <div className="col-span-1">
        <div className="sticky top-4">
          <Card>
            <CardHeader>
              <CardTitle>ğŸ“Š æˆæœ¬é¢„è§ˆ</CardTitle>
            </CardHeader>
            <CardContent>
              {costPreview && (
                <div className="space-y-4">
                  <div>
                    <div className="text-sm text-gray-600">å•ä½æ”¶å…¥</div>
                    <div className="text-2xl font-bold">${costPreview.unit_economics.revenue.toFixed(2)}</div>
                  </div>

                  <div>
                    <div className="text-sm text-gray-600">å•ä½æˆæœ¬</div>
                    <div className="text-2xl font-bold">${costPreview.unit_economics.cost.toFixed(2)}</div>
                  </div>

                  <Separator />

                  <div>
                    <div className="text-sm text-gray-600">å•ä½æ¯›åˆ©</div>
                    <div className={`text-3xl font-bold ${costPreview.unit_economics.gross_profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                      ${costPreview.unit_economics.gross_profit.toFixed(2)}
                      {costPreview.unit_economics.gross_profit < 0 && ' âŒ äºæŸ'}
                    </div>
                  </div>

                  <div>
                    <div className="text-sm text-gray-600">æ¯›åˆ©ç‡</div>
                    <div className={`text-2xl font-bold ${costPreview.unit_economics.gross_margin >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                      {costPreview.unit_economics.gross_margin.toFixed(1)}%
                      {costPreview.unit_economics.gross_margin < -50 && ' âš ï¸ ä¸¥é‡äºæŸ'}
                    </div>
                  </div>

                  {/* æ™ºèƒ½å»ºè®® */}
                  {costPreview.unit_economics.gross_margin < 0 && (
                    <Alert variant="destructive">
                      <AlertTriangle className="h-4 w-4" />
                      <AlertTitle>å»ºè®®</AlertTitle>
                      <AlertDescription>
                        <ul className="list-disc list-inside text-sm space-y-1">
                          <li>æé«˜é›¶å”®ä»·è‡³ ${(costPreview.unit_economics.cost / 0.7).toFixed(2)}+ å®ç°30%æ¯›åˆ©</li>
                          <li>é€‰æ‹©ä½æˆæœ¬å¸‚åœºï¼ˆå¦‚è¶Šå—/æ³°å›½ï¼‰</li>
                          <li>ä¼˜åŒ–ç‰©æµæ–¹å¼ï¼ˆç©ºè¿æ”¹æµ·è¿å¯èŠ‚çœæˆæœ¬ï¼‰</li>
                        </ul>
                      </AlertDescription>
                    </Alert>
                  )}
                </div>
              )}
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
  );
}
```

#### åŠŸèƒ½2ï¼šM4æ¨¡å—ç»„ä»¶ï¼ˆç¤ºä¾‹ï¼‰

```typescript
// components/wizard/modules/M4Module.tsx
interface M4ModuleProps {
  presetData: CostFactor;
  userOverrides: Partial<CostFactor>;
  scope: CalculationScope;
  expanded: boolean;
  onToggle: () => void;
  onOverride: (field: keyof CostFactor, value: any) => void;
  mode: 'quick' | 'expert';
}

export function M4Module({ presetData, userOverrides, scope, expanded, onToggle, onOverride, mode }: M4ModuleProps) {
  const effectiveTariffRate = userOverrides.m4_effective_tariff_rate ?? presetData.m4_effective_tariff_rate;
  const effectiveVatRate = userOverrides.m4_vat_rate ?? presetData.m4_vat_rate;
  const logistics = JSON.parse(presetData.m4_logistics) as M4Logistics;

  const isCustomized = (field: keyof CostFactor) => field in userOverrides;

  return (
    <div className="border rounded-lg">
      {/* æ¨¡å—æ ‡é¢˜ */}
      <button
        className="w-full flex items-center justify-between p-4 hover:bg-gray-50"
        onClick={onToggle}
      >
        <div className="flex items-center space-x-2">
          <ChevronDown className={`transform transition-transform ${expanded ? '' : '-rotate-90'}`} />
          <h3 className="font-semibold">M4: è´§ç‰©ç¨è´¹ï¼ˆGoods & Taxï¼‰</h3>
        </div>
        <div className="text-sm text-gray-600">
          å°è®¡: ${calculateM4Total().toFixed(2)}/å•ä½
        </div>
      </button>

      {/* æ¨¡å—å†…å®¹ */}
      {expanded && (
        <div className="p-4 space-y-4 border-t">
          {/* COGS */}
          <div>
            <Label>ğŸ“¦ å•†å“æˆæœ¬ (COGS)</Label>
            <Input
              type="number"
              value={scope.cogsUsd}
              onChange={(e) => {/* æ›´æ–°scope */}}
              className="mt-1"
            />
            <p className="text-xs text-gray-500 mt-1">ä»Step 1å¸¦å…¥ï¼Œå¯ä¿®æ”¹</p>
          </div>

          {/* å¤´ç¨‹ç‰©æµ */}
          <div>
            <Label>ğŸš¢ å¤´ç¨‹ç‰©æµ</Label>
            <div className="mt-2 space-y-2">
              <div className="flex items-center space-x-4">
                <Label>è¿è¾“æ–¹å¼:</Label>
                <RadioGroup value={scope.opex.shippingMethod} onValueChange={...}>
                  <div className="flex items-center space-x-2">
                    <RadioGroupItem value="sea" id="sea" />
                    <Label htmlFor="sea">æµ·è¿ (${logistics.sea_freight.usd_per_kg}/kg)</Label>
                  </div>
                  <div className="flex items-center space-x-2">
                    <RadioGroupItem value="air" id="air" />
                    <Label htmlFor="air">ç©ºè¿ (${logistics.air_freight.usd_per_kg}/kg)</Label>
                  </div>
                </RadioGroup>
              </div>

              <div className="bg-gray-50 p-3 rounded text-sm">
                <div className="flex justify-between">
                  <span>è´¹ç‡:</span>
                  <span className="font-medium">
                    ${scope.opex.shippingMethod === 'sea' ? logistics.sea_freight.usd_per_kg : logistics.air_freight.usd_per_kg}/kg
                    <Badge variant="secondary" className="ml-2">
                      {scope.opex.shippingMethod === 'sea' ? logistics.sea_freight.data_source : logistics.air_freight.data_source}
                    </Badge>
                  </span>
                </div>
                <div className="flex justify-between mt-1">
                  <span>äº§å“é‡é‡:</span>
                  <span className="font-medium">{scope.productWeightKg} kg</span>
                </div>
                <Separator className="my-2" />
                <div className="flex justify-between font-semibold">
                  <span>è®¡ç®—ç»“æœ:</span>
                  <span>${calculateLogisticsCost().toFixed(2)}/å•ä½</span>
                </div>
              </div>
            </div>
          </div>

          {/* è¿›å£å…³ç¨ */}
          <div>
            <div className="flex items-center justify-between">
              <Label>ğŸ’° è¿›å£å…³ç¨</Label>
              {!isCustomized('m4_effective_tariff_rate') && mode === 'expert' && (
                <Button
                  size="sm"
                  variant="outline"
                  onClick={() => {/* è¿›å…¥è‡ªå®šä¹‰æ¨¡å¼ */}}
                >
                  ğŸ”§ è‡ªå®šä¹‰
                </Button>
              )}
            </div>

            <div className="mt-2 bg-gray-50 p-3 rounded">
              <div className="flex items-center justify-between">
                <span className="text-sm">å…³ç¨ç¨ç‡:</span>
                <div className="flex items-center space-x-2">
                  {isCustomized('m4_effective_tariff_rate') ? (
                    <Input
                      type="number"
                      value={effectiveTariffRate * 100}
                      onChange={(e) => onOverride('m4_effective_tariff_rate', parseFloat(e.target.value) / 100)}
                      className="w-24"
                      step="0.1"
                    />
                  ) : (
                    <span className="font-medium">{(effectiveTariffRate * 100).toFixed(1)}%</span>
                  )}
                  <Badge variant={getTierVariant(presetData.m4_tariff_data_source)}>
                    {presetData.m4_tariff_data_source}
                  </Badge>
                  {effectiveTariffRate > 0.3 && (
                    <Badge variant="warning">âš ï¸ å¼‚å¸¸é«˜</Badge>
                  )}
                  {isCustomized('m4_effective_tariff_rate') && (
                    <Badge variant="info">å·²è‡ªå®šä¹‰</Badge>
                  )}
                </div>
              </div>

              {presetData.m4_tariff_notes && (
                <div className="text-xs text-gray-600 mt-2">
                  å¤‡æ³¨: {presetData.m4_tariff_notes}
                </div>
              )}

              <Separator className="my-2" />
              <div className="flex justify-between text-sm font-semibold">
                <span>è®¡ç®—ç»“æœ:</span>
                <span>${(scope.cogsUsd * effectiveTariffRate).toFixed(2)}/å•ä½</span>
              </div>
            </div>
          </div>

          {/* VAT */}
          <div>
            <Label>ğŸ“Š å¢å€¼ç¨ (VAT/GST)</Label>
            <div className="mt-2 bg-gray-50 p-3 rounded">
              <div className="flex items-center justify-between">
                <span className="text-sm">VATç¨ç‡:</span>
                <div className="flex items-center space-x-2">
                  <span className="font-medium">{(effectiveVatRate * 100).toFixed(1)}%</span>
                  <Badge variant="success">{presetData.m4_vat_data_source}</Badge>
                </div>
              </div>

              {presetData.m4_vat_notes && (
                <div className="text-xs text-gray-600 mt-2">
                  å¤‡æ³¨: {presetData.m4_vat_notes}
                </div>
              )}

              <div className="text-xs text-gray-600 mt-2">
                è®¡ç®—å…¬å¼: (COGS + ç‰©æµ + å…³ç¨) Ã— VATç¨ç‡
              </div>

              <Separator className="my-2" />
              <div className="flex justify-between text-sm font-semibold">
                <span>è®¡ç®—ç»“æœ:</span>
                <span>${calculateVatCost().toFixed(2)}/å•ä½</span>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
```

---

## 2.5 Step 3: æˆæœ¬å»ºæ¨¡ç»“æœï¼ˆå¢å¼ºå¯è§†åŒ–ï¼‰

### MVP 2.0å¢å¼ºè®¾è®¡

**å½“å‰POC**ï¼šç®€å•çš„é¥¼å›¾å’ŒæŸ±çŠ¶å›¾
**MVP 2.0**ï¼šå¤šç»´åº¦å¯è§†åŒ– + AIæ´å¯Ÿ

**ç•Œé¢ç»“æ„**ï¼š

```typescript
export function Step3CostModeling() {
  const costResult = wizardState.costResult;

  return (
    <div className="space-y-6">
      <h2>Step 3: æˆæœ¬å»ºæ¨¡ç»“æœ</h2>

      {/* å…³é”®KPIå¡ç‰‡ */}
      <div className="grid grid-cols-4 gap-4">
        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm">å•ä½æ¯›åˆ©</CardTitle>
          </CardHeader>
          <CardContent>
            <div className={`text-3xl font-bold ${costResult.unit_economics.gross_profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>
              ${costResult.unit_economics.gross_profit.toFixed(2)}
            </div>
            <p className="text-xs text-gray-500 mt-1">
              æ”¶å…¥ ${costResult.unit_economics.revenue} - æˆæœ¬ ${costResult.unit_economics.cost}
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm">æ¯›åˆ©ç‡</CardTitle>
          </CardHeader>
          <CardContent>
            <div className={`text-3xl font-bold ${costResult.unit_economics.gross_margin >= 30 ? 'text-green-600' : costResult.unit_economics.gross_margin >= 0 ? 'text-yellow-600' : 'text-red-600'}`}>
              {costResult.unit_economics.gross_margin.toFixed(1)}%
            </div>
            <Progress value={Math.max(0, costResult.unit_economics.gross_margin)} className="mt-2" />
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm">ROI</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold">{costResult.kpis.roi.toFixed(1)}%</div>
            <p className="text-xs text-gray-500 mt-1">æŠ•èµ„å›æŠ¥ç‡ï¼ˆå¹´åŒ–ï¼‰</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm">å›æœ¬å‘¨æœŸ</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold">{costResult.kpis.payback_period_months.toFixed(1)}</div>
            <p className="text-xs text-gray-500 mt-1">æœˆ</p>
          </CardContent>
        </Card>
      </div>

      {/* æˆæœ¬åˆ†å¸ƒå¯è§†åŒ– */}
      <div className="grid grid-cols-2 gap-6">
        {/* é¥¼å›¾ */}
        <Card>
          <CardHeader>
            <CardTitle>æˆæœ¬åˆ†å¸ƒï¼ˆæŒ‰æ¨¡å—ï¼‰</CardTitle>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <PieChart>
                <Pie
                  data={costResult.cost_breakdown}
                  dataKey="amount"
                  nameKey="module"
                  cx="50%"
                  cy="50%"
                  label={(entry) => `${entry.module}: ${entry.percentage.toFixed(1)}%`}
                >
                  {costResult.cost_breakdown.map((entry, index) => (
                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                  ))}
                </Pie>
                <Tooltip />
              </PieChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>

        {/* æŸ±çŠ¶å›¾ */}
        <Card>
          <CardHeader>
            <CardTitle>æˆæœ¬æ˜ç»†ï¼ˆUSD/å•ä½ï¼‰</CardTitle>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <BarChart data={costResult.cost_breakdown}>
                <CartesianGrid strokeDasharray="3 3" />
                <XAxis dataKey="module" angle={-45} textAnchor="end" height={100} />
                <YAxis />
                <Tooltip />
                <Bar dataKey="amount" fill="#3B82F6" />
              </BarChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>
      </div>

      {/* ç›ˆäºå¹³è¡¡åˆ†æ */}
      <Card>
        <CardHeader>
          <CardTitle>ç›ˆäºå¹³è¡¡åˆ†æ</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-2 gap-6">
            <div>
              <h4 className="font-semibold mb-2">ç›ˆäºå¹³è¡¡ä»·æ ¼</h4>
              <div className="text-2xl font-bold text-blue-600">
                ${costResult.kpis.breakeven_price.toFixed(2)}
              </div>
              <p className="text-sm text-gray-600 mt-1">
                åœ¨å½“å‰æˆæœ¬ç»“æ„ä¸‹ï¼Œé›¶å”®ä»·éœ€è¾¾åˆ°æ­¤ä»·æ ¼æ‰èƒ½ç›ˆäºå¹³è¡¡
              </p>
              {wizardState.scope.sellingPriceUsd < costResult.kpis.breakeven_price && (
                <Alert variant="warning" className="mt-2">
                  <AlertTriangle className="h-4 w-4" />
                  <AlertDescription>
                    å½“å‰å®šä»· ${wizardState.scope.sellingPriceUsd} ä½äºç›ˆäºå¹³è¡¡ä»·æ ¼ï¼Œå»ºè®®æä»·æˆ–é™ä½æˆæœ¬
                  </AlertDescription>
                </Alert>
              )}
            </div>

            <div>
              <h4 className="font-semibold mb-2">ç›ˆäºå¹³è¡¡é”€é‡</h4>
              <div className="text-2xl font-bold text-blue-600">
                {costResult.kpis.breakeven_volume.toFixed(0)} å•ä½/æœˆ
              </div>
              <p className="text-sm text-gray-600 mt-1">
                è¦†ç›–CAPEXæ‰€éœ€çš„æœ€ä½æœˆé”€é‡
              </p>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* åº•éƒ¨å¯¼èˆª */}
      <div className="flex justify-between">
        <Button variant="outline" onClick={goToPrevStep}>â† è¿”å›ä¿®æ”¹å‚æ•°</Button>
        <div className="space-x-2">
          <Button variant="outline" onClick={handleSaveCalculation}>ğŸ’¾ ä¿å­˜è®¡ç®—</Button>
          <Button onClick={goToNextStep}>ä¸‹ä¸€æ­¥ï¼šåœºæ™¯å¯¹æ¯” â†’</Button>
        </div>
      </div>
    </div>
  );
}
```

---

## 2.6 Step 4: å¤šåœºæ™¯å¯¹æ¯”åˆ†æï¼ˆ19å›½å¯¹æ¯”ï¼‰

### è®¾è®¡æ€è·¯

**æ ¸å¿ƒä»·å€¼**ï¼šåˆ©ç”¨19å›½çœŸå®æ•°æ®ï¼Œå¿«é€Ÿå¯¹æ¯”ä¸åŒå¸‚åœº/æ¸ é“çš„æˆæœ¬ç»“æ„ï¼Œæ‰¾åˆ°æœ€ä¼˜å¸‚åœºã€‚

**åŠŸèƒ½è®¾è®¡**ï¼š

```typescript
export function Step4Comparison() {
  const [comparisonScenarios, setComparisonScenarios] = useState<string[]>([
    wizardState.scope.targetCountry, // å½“å‰å›½å®¶
  ]);

  const [comparisonResults, setComparisonResults] = useState<Map<string, CostResult>>(new Map());

  const addScenario = (countryCode: string) => {
    if (comparisonScenarios.length >= 5) {
      alert('æœ€å¤šå¯¹æ¯”5ä¸ªåœºæ™¯');
      return;
    }
    setComparisonScenarios([...comparisonScenarios, countryCode]);
  };

  useEffect(() => {
    // ä¸ºæ¯ä¸ªåœºæ™¯è®¡ç®—æˆæœ¬ç»“æœ
    const results = new Map();
    for (const country of comparisonScenarios) {
      const result = calculateCostForCountry(country);
      results.set(country, result);
    }
    setComparisonResults(results);
  }, [comparisonScenarios]);

  return (
    <div className="space-y-6">
      <h2>Step 4: å¤šåœºæ™¯å¯¹æ¯”åˆ†æ</h2>

      {/* åœºæ™¯é€‰æ‹©å™¨ */}
      <Card>
        <CardHeader>
          <CardTitle>é€‰æ‹©å¯¹æ¯”åœºæ™¯</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex flex-wrap gap-2">
            {comparisonScenarios.map((country) => (
              <Badge key={country} variant="secondary" className="text-lg py-2 px-4">
                {getCountryFlag(country)} {getCountryName(country)}
                <X className="ml-2 h-4 w-4 cursor-pointer" onClick={() => removeScenario(country)} />
              </Badge>
            ))}

            {comparisonScenarios.length < 5 && (
              <Popover>
                <PopoverTrigger asChild>
                  <Button variant="outline">+ æ·»åŠ åœºæ™¯</Button>
                </PopoverTrigger>
                <PopoverContent className="w-80">
                  <CountrySelector
                    countries={allCountries}
                    selectedCountry={null}
                    onSelect={(country) => {
                      addScenario(country);
                      closePopover();
                    }}
                  />
                </PopoverContent>
              </Popover>
            )}
          </div>
        </CardContent>
      </Card>

      {/* å¯¹æ¯”è¡¨æ ¼ */}
      <Card>
        <CardHeader>
          <CardTitle>æˆæœ¬å¯¹æ¯”è¡¨</CardTitle>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>æŒ‡æ ‡</TableHead>
                {comparisonScenarios.map((country) => (
                  <TableHead key={country} className="text-center">
                    {getCountryFlag(country)} {getCountryName(country)}
                  </TableHead>
                ))}
              </TableRow>
            </TableHeader>
            <TableBody>
              {/* å…³ç¨ */}
              <TableRow>
                <TableCell className="font-medium">å…³ç¨ç¨ç‡</TableCell>
                {comparisonScenarios.map((country) => {
                  const data = getCostFactorData(country);
                  return (
                    <TableCell key={country} className="text-center">
                      {(data.m4_effective_tariff_rate * 100).toFixed(1)}%
                      {data.m4_effective_tariff_rate === Math.min(...comparisonScenarios.map(c => getCostFactorData(c).m4_effective_tariff_rate)) && (
                        <Badge variant="success" className="ml-2">æœ€ä¼˜</Badge>
                      )}
                    </TableCell>
                  );
                })}
              </TableRow>

              {/* VAT */}
              <TableRow>
                <TableCell className="font-medium">VAT/GST</TableCell>
                {comparisonScenarios.map((country) => {
                  const data = getCostFactorData(country);
                  return (
                    <TableCell key={country} className="text-center">
                      {(data.m4_vat_rate * 100).toFixed(1)}%
                    </TableCell>
                  );
                })}
              </TableRow>

              {/* ç‰©æµè´¹ç”¨ */}
              <TableRow>
                <TableCell className="font-medium">ç‰©æµè´¹ç”¨ï¼ˆç©ºè¿ï¼‰</TableCell>
                {comparisonScenarios.map((country) => {
                  const data = getCostFactorData(country);
                  const logistics = JSON.parse(data.m4_logistics) as M4Logistics;
                  const cost = logistics.air_freight.usd_per_kg * wizardState.scope.productWeightKg;
                  return (
                    <TableCell key={country} className="text-center">
                      ${cost.toFixed(2)}
                    </TableCell>
                  );
                })}
              </TableRow>

              {/* å¹³å°ä½£é‡‘ */}
              <TableRow>
                <TableCell className="font-medium">å¹³å°ä½£é‡‘ç‡</TableCell>
                {comparisonScenarios.map((country) => {
                  const data = getCostFactorData(country);
                  return (
                    <TableCell key={country} className="text-center">
                      {(data.m7_platform_commission_rate * 100).toFixed(1)}%
                    </TableCell>
                  );
                })}
              </TableRow>

              <TableRow className="bg-gray-50">
                <TableCell colSpan={comparisonScenarios.length + 1}></TableCell>
              </TableRow>

              {/* å•ä½æˆæœ¬ */}
              <TableRow>
                <TableCell className="font-medium">å•ä½æ€»æˆæœ¬</TableCell>
                {comparisonScenarios.map((country) => {
                  const result = comparisonResults.get(country);
                  return (
                    <TableCell key={country} className="text-center font-semibold">
                      ${result?.unit_economics.cost.toFixed(2)}
                    </TableCell>
                  );
                })}
              </TableRow>

              {/* æ¯›åˆ©ç‡ */}
              <TableRow>
                <TableCell className="font-medium">æ¯›åˆ©ç‡</TableCell>
                {comparisonScenarios.map((country) => {
                  const result = comparisonResults.get(country);
                  const margin = result?.unit_economics.gross_margin ?? 0;
                  return (
                    <TableCell key={country} className="text-center">
                      <span className={`font-semibold ${margin >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                        {margin.toFixed(1)}%
                      </span>
                      {margin === Math.max(...Array.from(comparisonResults.values()).map(r => r.unit_economics.gross_margin)) && (
                        <Badge variant="success" className="ml-2">æœ€ä¼˜</Badge>
                      )}
                    </TableCell>
                  );
                })}
              </TableRow>
            </TableBody>
          </Table>
        </CardContent>
      </Card>

      {/* å¯è§†åŒ–å¯¹æ¯” */}
      <Card>
        <CardHeader>
          <CardTitle>æ¯›åˆ©ç‡å¯¹æ¯”</CardTitle>
        </CardHeader>
        <CardContent>
          <ResponsiveContainer width="100%" height={300}>
            <BarChart data={Array.from(comparisonResults.entries()).map(([country, result]) => ({
              country: getCountryName(country),
              grossMargin: result.unit_economics.gross_margin,
              fill: result.unit_economics.gross_margin >= 0 ? '#10B981' : '#EF4444'
            }))}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="country" />
              <YAxis label={{ value: 'æ¯›åˆ©ç‡ (%)', angle: -90, position: 'insideLeft' }} />
              <Tooltip />
              <Bar dataKey="grossMargin" />
            </BarChart>
          </ResponsiveContainer>
        </CardContent>
      </Card>

      {/* æ™ºèƒ½æ¨è */}
      <Card>
        <CardHeader>
          <CardTitle>ğŸ’¡ æ™ºèƒ½æ¨è</CardTitle>
        </CardHeader>
        <CardContent>
          <Alert>
            <Lightbulb className="h-4 w-4" />
            <AlertTitle>åŸºäºå¯¹æ¯”åˆ†æï¼Œæˆ‘ä»¬çš„å»ºè®®ï¼š</AlertTitle>
            <AlertDescription>
              <ol className="list-decimal list-inside space-y-2 mt-2">
                <li>
                  <strong>æœ€ä¼˜å¸‚åœº</strong>: {getBestCountry().name} ï¼ˆæ¯›åˆ©ç‡ {getBestCountry().margin.toFixed(1)}%ï¼‰
                </li>
                <li>
                  <strong>æˆæœ¬æœ€ä½</strong>: {getLowestCostCountry().name} ï¼ˆå•ä½æˆæœ¬ ${getLowestCostCountry().cost.toFixed(2)}ï¼‰
                </li>
                <li>
                  <strong>é¿å¼€å¸‚åœº</strong>: {getWorstCountries().map(c => c.name).join('ã€')} ï¼ˆæ¯›åˆ©ç‡ä¸ºè´Ÿï¼‰
                </li>
              </ol>
            </AlertDescription>
          </Alert>
        </CardContent>
      </Card>

      {/* åº•éƒ¨å¯¼èˆª */}
      <div className="flex justify-between">
        <Button variant="outline" onClick={goToPrevStep}>â† ä¸Šä¸€æ­¥</Button>
        <Button onClick={goToNextStep}>ä¸‹ä¸€æ­¥ï¼šAIæ™ºèƒ½åŠ©æ‰‹ â†’</Button>
      </div>
    </div>
  );
}
```

---

## 2.7 Step 5: AIæ™ºèƒ½åŠ©æ‰‹ï¼ˆæ·±åº¦é›†æˆï¼‰

### å½“å‰POCé—®é¢˜

- AIæ— æ³•è®¿é—®æˆæœ¬è®¡ç®—ç»“æœ
- æ— æ³•å›ç­”"å¦‚ä½•ä¼˜åŒ–ROI"ç­‰é—®é¢˜
- æ²¡æœ‰å·¥å…·è°ƒç”¨èƒ½åŠ›

### MVP 2.0è®¾è®¡ï¼šå·¥å…·è°ƒç”¨é›†æˆ

```typescript
// lib/deepseek-tools.ts

/**
 * DeepSeekå·¥å…·å®šä¹‰ï¼šæˆæœ¬æŸ¥è¯¢
 */
export const getCostBreakdownTool = {
  type: 'function',
  function: {
    name: 'get_cost_breakdown',
    description: 'è·å–å½“å‰é¡¹ç›®çš„æˆæœ¬æ‹†è§£è¯¦æƒ…ï¼ŒåŒ…æ‹¬M1-M8å„æ¨¡å—çš„æˆæœ¬æ˜ç»†',
    parameters: {
      type: 'object',
      properties: {
        module: {
          type: 'string',
          enum: ['all', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'm8'],
          description: 'è¦æŸ¥è¯¢çš„æ¨¡å—ï¼Œallè¡¨ç¤ºå…¨éƒ¨'
        }
      },
      required: []
    }
  }
};

/**
 * DeepSeekå·¥å…·å®šä¹‰ï¼šåœºæ™¯å¯¹æ¯”
 */
export const compareScenariosTool = {
  type: 'function',
  function: {
    name: 'compare_scenarios',
    description: 'å¯¹æ¯”ä¸åŒå›½å®¶æˆ–æ¸ é“çš„æˆæœ¬ç»“æ„ï¼Œæ‰¾å‡ºå·®å¼‚å’Œæœ€ä¼˜é€‰æ‹©',
    parameters: {
      type: 'object',
      properties: {
        countries: {
          type: 'array',
          items: { type: 'string' },
          description: 'è¦å¯¹æ¯”çš„å›½å®¶ä»£ç åˆ—è¡¨ï¼Œå¦‚["US", "VN", "DE"]'
        },
        metric: {
          type: 'string',
          enum: ['gross_margin', 'total_cost', 'roi', 'tariff_rate'],
          description: 'å¯¹æ¯”çš„æŒ‡æ ‡'
        }
      },
      required: ['countries']
    }
  }
};

/**
 * DeepSeekå·¥å…·å®šä¹‰ï¼šä¼˜åŒ–å»ºè®®
 */
export const getOptimizationSuggestionsTool = {
  type: 'function',
  function: {
    name: 'get_optimization_suggestions',
    description: 'åŸºäºå½“å‰æˆæœ¬ç»“æ„ï¼Œç”Ÿæˆä¼˜åŒ–å»ºè®®ï¼ˆå¦‚é™ä½å…³ç¨ã€ä¼˜åŒ–ç‰©æµã€è°ƒæ•´å®šä»·ç­‰ï¼‰',
    parameters: {
      type: 'object',
      properties: {
        focus_area: {
          type: 'string',
          enum: ['pricing', 'logistics', 'market_selection', 'cost_reduction', 'all'],
          description: 'ä¼˜åŒ–é‡ç‚¹é¢†åŸŸ'
        }
      },
      required: []
    }
  }
};

// components/wizard/Step5AIAssistant.tsx
export function Step5AIAssistant() {
  const [messages, setMessages] = useState<Message[]>([
    {
      role: 'assistant',
      content: `ä½ å¥½ï¼æˆ‘æ˜¯GECOMæ™ºèƒ½æˆæœ¬åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼š

1. ğŸ“Š åˆ†ææˆæœ¬ç»“æ„å’Œç›ˆåˆ©èƒ½åŠ›
2. ğŸ” å¯¹æ¯”ä¸åŒå¸‚åœºçš„æˆæœ¬å·®å¼‚
3. ğŸ’¡ æä¾›ROIä¼˜åŒ–å»ºè®®
4. ğŸ¯ æ‰¾å‡ºæˆæœ¬é©±åŠ¨å› ç´ 

è¯·é—®æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ`
    }
  ]);

  const [inputMessage, setInputMessage] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const handleSendMessage = async () => {
    if (!inputMessage.trim()) return;

    const userMessage: Message = {
      role: 'user',
      content: inputMessage
    };

    setMessages([...messages, userMessage]);
    setInputMessage('');
    setIsLoading(true);

    try {
      // è°ƒç”¨DeepSeek API withå·¥å…·è°ƒç”¨
      const response = await callDeepSeekWithTools(
        [...messages, userMessage],
        [getCostBreakdownTool, compareScenariosTool, getOptimizationSuggestionsTool]
      );

      // å¤„ç†å·¥å…·è°ƒç”¨
      if (response.tool_calls) {
        for (const toolCall of response.tool_calls) {
          const toolResult = await executeToolCall(toolCall);

          // æ·»åŠ å·¥å…·è°ƒç”¨ç»“æœåˆ°æ¶ˆæ¯
          setMessages((prev) => [
            ...prev,
            {
              role: 'tool',
              tool_call_id: toolCall.id,
              content: JSON.stringify(toolResult)
            }
          ]);
        }

        // å†æ¬¡è°ƒç”¨AIç”Ÿæˆæœ€ç»ˆå›å¤
        const finalResponse = await callDeepSeekWithTools(messages);
        setMessages((prev) => [...prev, {
          role: 'assistant',
          content: finalResponse.content
        }]);
      } else {
        // ç›´æ¥æ·»åŠ AIå›å¤
        setMessages((prev) => [...prev, {
          role: 'assistant',
          content: response.content
        }]);
      }
    } catch (error) {
      console.error('AIè°ƒç”¨å¤±è´¥:', error);
      setMessages((prev) => [...prev, {
        role: 'assistant',
        content: 'æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚è¯·ç¨åå†è¯•ã€‚'
      }]);
    } finally {
      setIsLoading(false);
    }
  };

  const executeToolCall = async (toolCall: ToolCall) => {
    const { name, arguments: args } = toolCall.function;

    switch (name) {
      case 'get_cost_breakdown':
        return getCostBreakdown(args.module);

      case 'compare_scenarios':
        return compareScenarios(args.countries, args.metric);

      case 'get_optimization_suggestions':
        return getOptimizationSuggestions(args.focus_area);

      default:
        throw new Error(`Unknown tool: ${name}`);
    }
  };

  const getCostBreakdown = (module: string) => {
    const result = wizardState.costResult;

    if (module === 'all') {
      return {
        capex: result.capex,
        opex: result.opex,
        unit_economics: result.unit_economics,
        kpis: result.kpis
      };
    } else {
      // è¿”å›ç‰¹å®šæ¨¡å—
      return {
        module,
        cost: result.opex[`${module}_total`] || result.capex[module],
        percentage: result.cost_breakdown.find(item => item.module.startsWith(module.toUpperCase()))?.percentage
      };
    }
  };

  const compareScenarios = async (countries: string[], metric: string) => {
    const results = [];

    for (const country of countries) {
      const costFactor = await databases.getDocument(
        DATABASE_ID,
        'cost_factors',
        Query.equal('country', country)
      );

      const result = calculateCostForCountry(country);

      results.push({
        country,
        country_name: costFactor.country_name_cn,
        [metric]: result[metric] || result.unit_economics[metric]
      });
    }

    return results;
  };

  const getOptimizationSuggestions = (focusArea: string) => {
    const result = wizardState.costResult;
    const suggestions = [];

    if (focusArea === 'pricing' || focusArea === 'all') {
      if (result.unit_economics.gross_margin < 30) {
        suggestions.push({
          area: 'pricing',
          issue: `å½“å‰æ¯›åˆ©ç‡${result.unit_economics.gross_margin.toFixed(1)}%è¿‡ä½`,
          suggestion: `å»ºè®®æä»·è‡³$${result.kpis.breakeven_price.toFixed(2)}ä»¥ä¸Šï¼Œç›®æ ‡æ¯›åˆ©ç‡30%+`,
          impact: `æä»·è‡³$${(result.unit_economics.cost / 0.7).toFixed(2)}å¯å®ç°30%æ¯›åˆ©ç‡`
        });
      }
    }

    if (focusArea === 'logistics' || focusArea === 'all') {
      const currentLogistics = result.opex.m4_logistics;
      const seaFreightCost = calculateSeaFreightCost();

      if (currentLogistics > seaFreightCost * 1.5) {
        suggestions.push({
          area: 'logistics',
          issue: `å½“å‰ä½¿ç”¨ç©ºè¿ï¼Œæˆæœ¬$${currentLogistics.toFixed(2)}/å•ä½`,
          suggestion: `æ”¹ç”¨æµ·è¿å¯é™è‡³$${seaFreightCost.toFixed(2)}/å•ä½`,
          impact: `èŠ‚çœ$${(currentLogistics - seaFreightCost).toFixed(2)}/å•ä½ï¼Œæå‡${((currentLogistics - seaFreightCost) / result.unit_economics.revenue * 100).toFixed(1)}%æ¯›åˆ©ç‡`
        });
      }
    }

    if (focusArea === 'market_selection' || focusArea === 'all') {
      const bestMarket = findBestAlternativeMarket();

      if (bestMarket && bestMarket.margin > result.unit_economics.gross_margin + 10) {
        suggestions.push({
          area: 'market_selection',
          issue: `å½“å‰å¸‚åœº${wizardState.scope.targetCountry}æ¯›åˆ©ç‡${result.unit_economics.gross_margin.toFixed(1)}%`,
          suggestion: `å»ºè®®åˆ‡æ¢è‡³${bestMarket.name}å¸‚åœº`,
          impact: `å¯å®ç°${bestMarket.margin.toFixed(1)}%æ¯›åˆ©ç‡ï¼Œæå‡${(bestMarket.margin - result.unit_economics.gross_margin).toFixed(1)}ä¸ªç™¾åˆ†ç‚¹`
        });
      }
    }

    return suggestions;
  };

  return (
    <div className="space-y-6">
      <h2>Step 5: AIæ™ºèƒ½åŠ©æ‰‹</h2>

      <Card className="h-[600px] flex flex-col">
        <CardHeader>
          <CardTitle>ğŸ’¬ æ™ºèƒ½æˆæœ¬é¡¾é—®</CardTitle>
          <CardDescription>
            åŸºäºDeepSeek R1/V3ï¼Œè¿æ¥çœŸå®æˆæœ¬æ•°æ®ï¼Œæä¾›ä¸“ä¸šä¼˜åŒ–å»ºè®®
          </CardDescription>
        </CardHeader>

        {/* èŠå¤©æ¶ˆæ¯åŒºåŸŸ */}
        <CardContent className="flex-1 overflow-y-auto">
          <div className="space-y-4">
            {messages.map((message, index) => (
              <div
                key={index}
                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] rounded-lg px-4 py-2 ${
                    message.role === 'user'
                      ? 'bg-blue-500 text-white'
                      : 'bg-gray-100 text-gray-900'
                  }`}
                >
                  <ReactMarkdown>{message.content}</ReactMarkdown>
                </div>
              </div>
            ))}

            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 rounded-lg px-4 py-2">
                  <Loader2 className="h-4 w-4 animate-spin" />
                </div>
              </div>
            )}
          </div>
        </CardContent>

        {/* è¾“å…¥åŒºåŸŸ */}
        <CardFooter>
          <div className="flex w-full space-x-2">
            <Input
              placeholder="é—®æˆ‘ä»»ä½•å…³äºæˆæœ¬ä¼˜åŒ–çš„é—®é¢˜..."
              value={inputMessage}
              onChange={(e) => setInputMessage(e.target.value)}
              onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
              disabled={isLoading}
            />
            <Button onClick={handleSendMessage} disabled={isLoading || !inputMessage.trim()}>
              <Send className="h-4 w-4" />
            </Button>
          </div>
        </CardFooter>
      </Card>

      {/* å¿«æ·é—®é¢˜ */}
      <Card>
        <CardHeader>
          <CardTitle>ğŸ’¡ å¿«æ·é—®é¢˜</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-2 gap-2">
            <Button variant="outline" onClick={() => setInputMessage('åˆ†æå½“å‰æˆæœ¬ç»“æ„ï¼Œæ‰¾å‡ºä¸»è¦æˆæœ¬é©±åŠ¨å› ç´ ')}>
              åˆ†ææˆæœ¬é©±åŠ¨å› ç´ 
            </Button>
            <Button variant="outline" onClick={() => setInputMessage('å¯¹æ¯”ç¾å›½ã€è¶Šå—ã€å¾·å›½ä¸‰ä¸ªå¸‚åœºçš„æˆæœ¬å·®å¼‚')}>
              å¯¹æ¯”å¤šä¸ªå¸‚åœº
            </Button>
            <Button variant="outline" onClick={() => setInputMessage('å¦‚ä½•ä¼˜åŒ–ROIè‡³å°‘è¾¾åˆ°50%ï¼Ÿ')}>
              ä¼˜åŒ–ROIå»ºè®®
            </Button>
            <Button variant="outline" onClick={() => setInputMessage('å½“å‰å®šä»·ä¸‹éœ€è¦å¤šå°‘é”€é‡æ‰èƒ½ç›ˆäºå¹³è¡¡ï¼Ÿ')}>
              ç›ˆäºå¹³è¡¡åˆ†æ
            </Button>
          </div>
        </CardContent>
      </Card>

      {/* åº•éƒ¨å¯¼èˆª */}
      <div className="flex justify-between">
        <Button variant="outline" onClick={goToPrevStep}>â† ä¸Šä¸€æ­¥</Button>
        <Button onClick={handleFinish}>âœ… å®Œæˆå¹¶ç”ŸæˆæŠ¥å‘Š</Button>
      </div>
    </div>
  );
}
```

---

**ç¬¬äºŒéƒ¨åˆ†å®Œæˆæ£€æŸ¥ç‚¹**ï¼š
- âœ… Step 0: é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆæ–°å¢ç‹¬ç«‹æ­¥éª¤ï¼‰
- âœ… Step 1: ä¸šåŠ¡åœºæ™¯å®šä¹‰ï¼ˆ19å›½åŠ¨æ€åŠ è½½ï¼‰
- âœ… Step 2: æˆæœ¬å‚æ•°é…ç½®ï¼ˆå®Œæ•´M1-M8å±•ç¤ºï¼‰â­æ ¸å¿ƒ
- âœ… Step 3: æˆæœ¬å»ºæ¨¡ç»“æœï¼ˆå¢å¼ºå¯è§†åŒ–ï¼‰
- âœ… Step 4: å¤šåœºæ™¯å¯¹æ¯”åˆ†æï¼ˆ19å›½å¯¹æ¯”ï¼‰
- âœ… Step 5: AIæ™ºèƒ½åŠ©æ‰‹ï¼ˆå·¥å…·è°ƒç”¨é›†æˆï¼‰

---
