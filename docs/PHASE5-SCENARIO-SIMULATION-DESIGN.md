# Phase 5: åœºæ™¯æ¨¡æ‹Ÿä¸19å›½çœŸå®æ•°æ®é›†æˆ - è®¾è®¡æ–¹æ¡ˆ

> **åˆ›å»ºæ—¶é—´**: 2025-11-14
> **ç‰ˆæœ¬**: v1.0
> **çŠ¶æ€**: è®¾è®¡å®Œæˆï¼Œå¾…å®æ–½
> **å¯¹åº”ç™½çš®ä¹¦**: GECOM Phase 4 - åœºæ™¯æ¨¡æ‹Ÿä¸æ•æ„Ÿæ€§åˆ†æ

---

## ğŸ“‹ æ ¸å¿ƒç†è§£çº æ­£

### âŒ é”™è¯¯ç†è§£ï¼ˆInitialï¼‰
Phase 5æ˜¯å°†19å›½æˆæœ¬æ•°æ®è‡ªåŠ¨è®¡ç®—å¹¶é™æ€å±•ç¤ºå¯¹æ¯”ç»“æœã€‚

### âœ… æ­£ç¡®ç†è§£ï¼ˆCorrectedï¼‰
Phase 5æ˜¯**äº¤äº’å¼What-Ifåœºæ™¯æ¨¡æ‹Ÿå·¥å…·**ï¼š
- ç”¨æˆ·è°ƒèŠ‚å…³é”®å‚æ•°ï¼ˆä»·æ ¼ã€é”€é‡ã€CACã€ç‰©æµæ¨¡å¼ç­‰ï¼‰
- ä»19å›½æ•°æ®åº“ä¸­é€‰æ‹©3-5ä¸ªç›®æ ‡å¸‚åœº
- ç³»ç»Ÿå®æ—¶é‡æ–°è®¡ç®—æ‰€é€‰å›½å®¶çš„M1-M8æˆæœ¬
- ç™½ç›’å±•ç¤ºå‚æ•°å˜åŒ–å¦‚ä½•å½±å“æˆæœ¬ç»“æ„
- æ¨ªå‘å¯¹æ¯”ä¸åŒå¸‚åœºåœ¨åŒä¸€åœºæ™¯ä¸‹çš„ç›ˆåˆ©èƒ½åŠ›

### æ ¸å¿ƒä»·å€¼
é€šè¿‡å‚æ•°åŒ–æ¨¡æ‹Ÿï¼Œå¸®åŠ©ç”¨æˆ·å›ç­”ï¼š
- "å¦‚æœæˆ‘æŠŠå”®ä»·æé«˜åˆ°$55ï¼Œå“ªä¸ªå¸‚åœºROIæœ€é«˜ï¼Ÿ"
- "å¦‚æœæˆ‘ç”¨æµ·è¿æ›¿ä»£ç©ºè¿ï¼Œèƒ½èŠ‚çœå¤šå°‘æˆæœ¬ï¼Ÿ"
- "å¦‚æœæˆ‘åœ¨äºšé©¬é€ŠFBA vs è‡ªå»º3PLï¼Œå“ªä¸ªæ›´åˆ’ç®—ï¼Ÿ"
- "åœ¨æ‚²è§‚é”€é‡ï¼ˆæœˆé”€500ï¼‰vs ä¹è§‚é”€é‡ï¼ˆæœˆé”€2000ï¼‰ä¸‹ï¼Œç›ˆäºå¹³è¡¡ç‚¹å·®å¼‚å¤šå¤§ï¼Ÿ"

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

### åŠŸèƒ½ç›®æ ‡
1. **å‚æ•°åŒ–è®¡ç®—å¼•æ“** - æ”¯æŒ7å¤§å…³é”®å‚æ•°åŠ¨æ€è¦†ç›–
2. **å¤šå›½å¹¶è¡Œå¯¹æ¯”** - 3-5å›½æ¨ªå‘æˆæœ¬ç»“æ„å¯¹æ¯”
3. **ç™½ç›’é€æ˜å±•ç¤º** - æ¸…æ™°å±•ç¤ºå‚æ•°â†’æˆæœ¬å½±å“é“¾æ¡
4. **å®æ—¶å“åº”** - 300mså†…å®Œæˆé‡ç®—å¹¶æ›´æ–°UI
5. **å†³ç­–æ”¯æŒ** - åŸºäºå¯¹æ¯”ç»“æœç”Ÿæˆæ´å¯Ÿå»ºè®®

### è´¨é‡ç›®æ ‡
- âœ… è®¡ç®—å‡†ç¡®æ€§ï¼š100%ä½¿ç”¨çœŸå®19å›½æ•°æ®
- âœ… å“åº”é€Ÿåº¦ï¼šå‚æ•°è°ƒæ•´â†’ç»“æœæ›´æ–° < 300ms
- âœ… æ•°æ®æº¯æºï¼šæ¯ä¸ªæˆæœ¬é¡¹æ˜¾ç¤ºTierè´¨é‡å¾½ç« 
- âœ… ç”¨æˆ·ä½“éªŒï¼šAppleçº§åˆ«äº¤äº’æµç•…åº¦
- âœ… æµ‹è¯•è¦†ç›–ï¼šPlaywright E2Eæµ‹è¯• â‰¥ 8ä¸ªç”¨ä¾‹

---

## ğŸ—ï¸ å››é˜¶æ®µæ¶æ„è®¾è®¡

### Phase 5A: å‚æ•°è°ƒèŠ‚é¢æ¿ï¼ˆ40minï¼‰

**ç»„ä»¶**: `ScenarioParameterPanel.tsx`

**å¯è°ƒå‚æ•°ï¼ˆ7ä¸ªï¼‰**:

```
ä»·æ ¼å‚æ•°åŒºï¼š
â”œâ”€ å”®ä»· (Selling Price): $30 - $100ï¼Œæ­¥é•¿$1ï¼Œé»˜è®¤$45
â”‚  â””â”€ å½±å“: å•ä½æ”¶å…¥ã€VATè®¡ç¨åŸºç¡€ã€ç›®æ ‡æ¯›åˆ©ç‡
â”‚
â”œâ”€ æœˆé”€é‡ (Monthly Volume): 500 - 5000ï¼Œæ­¥é•¿100ï¼Œé»˜è®¤1000
â”‚  â””â”€ å½±å“: CAPEXåˆ†æ‘Šã€è§„æ¨¡ç»æµã€å›æœ¬å‘¨æœŸ
â”‚
â””â”€ è·å®¢æˆæœ¬ (CAC): $10 - $60ï¼Œæ­¥é•¿$1ï¼Œé»˜è®¤$25
   â””â”€ å½±å“: M6è¥é”€è·å®¢æˆæœ¬ã€LTV:CACæ¯”ç‡

è¿è¥å‚æ•°åŒºï¼š
â”œâ”€ ç‰©æµæ¨¡å¼ (Logistics Mode): æµ·è¿ | ç©ºè¿ï¼Œé»˜è®¤æµ·è¿
â”‚  â””â”€ å½±å“: M4å¤´ç¨‹ç‰©æµæˆæœ¬ï¼ˆæµ·è¿$2.5/kg vs ç©ºè¿$8.5/kgï¼‰
â”‚
â”œâ”€ å±¥çº¦æ¨¡å¼ (Fulfillment Mode): FBA | 3PL | Directï¼Œé»˜è®¤FBA
â”‚  â””â”€ å½±å“: M5å°¾ç¨‹é…é€æˆæœ¬ã€ä»“å‚¨è´¹ç”¨
â”‚
â”œâ”€ é€€è´§ç‡ (Return Rate): 0% - 15%ï¼Œæ­¥é•¿1%ï¼Œé»˜è®¤5%
â”‚  â””â”€ å½±å“: M5é€†å‘ç‰©æµæˆæœ¬ã€å‡€æ”¶å…¥
â”‚
â””â”€ æ”¯ä»˜æ–¹å¼ (Payment Gateway): Stripe | PayPal | Shop Payï¼Œé»˜è®¤Stripe
   â””â”€ å½±å“: M7æ”¯ä»˜æ‰‹ç»­è´¹ç‡ï¼ˆ2.9% vs 3.5%ï¼‰
```

**UIå¸ƒå±€ï¼ˆLiquid Glasså¡ç‰‡ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š åœºæ™¯å‚æ•°è°ƒèŠ‚                        [é‡ç½®é»˜è®¤å€¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  ğŸ’° ä»·æ ¼å‚æ•°                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å”®ä»· (Selling Price)          $45          â”‚    â”‚
â”‚  â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚    â”‚
â”‚  â”‚  $30                          $65           $100  â”‚
â”‚  â”‚  ğŸ’¡ å½“å‰å”®ä»·ä¸‹ç›®æ ‡æ¯›åˆ©ç‡: 38%                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æœˆé”€é‡ (Monthly Volume)       1000 units   â”‚    â”‚
â”‚  â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚    â”‚
â”‚  â”‚  500                         2750           5000  â”‚
â”‚  â”‚  ğŸ’¡ å½“å‰é”€é‡ä¸‹CAPEXåˆ†æ‘Š: $2.5/ä»¶             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  è·å®¢æˆæœ¬ (CAC)                $25          â”‚    â”‚
â”‚  â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚    â”‚
â”‚  â”‚  $10                          $35           $60   â”‚
â”‚  â”‚  ğŸ’¡ LTV:CACæ¯”ç‡: 2.8:1ï¼ˆå¥åº·ï¼‰                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  ğŸšš è¿è¥å‚æ•°                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ç‰©æµæ¨¡å¼:  [ æµ·è¿ âœ“ ]  [ ç©ºè¿   ]           â”‚    â”‚
â”‚  â”‚  ğŸ’¡ æµ·è¿å¯èŠ‚çœ$6.0/kgï¼Œä½†äº¤ä»˜å‘¨æœŸ+20å¤©        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å±¥çº¦æ¨¡å¼:  [ FBA âœ“ ]  [ 3PL ]  [ Direct ]   â”‚    â”‚
â”‚  â”‚  ğŸ’¡ FBAè´¹ç”¨$3.5/ä»¶ï¼Œå«Primeæµé‡åŠ æˆ           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  é€€è´§ç‡ (Return Rate)          5%           â”‚    â”‚
â”‚  â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚    â”‚
â”‚  â”‚  0%                           7.5%          15%   â”‚
â”‚  â”‚  ğŸ’¡ é€€è´§ç‡æ¯å¢åŠ 1%ï¼Œå‡€åˆ©æ¶¦ä¸‹é™$0.8/ä»¶         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯å®ç°**:
```typescript
interface ScenarioParams {
  sellingPrice: number;       // å”®ä»·
  monthlyVolume: number;      // æœˆé”€é‡
  cac: number;                // è·å®¢æˆæœ¬
  logisticsMode: 'sea' | 'air'; // ç‰©æµæ¨¡å¼
  fulfillmentMode: 'fba' | '3pl' | 'direct'; // å±¥çº¦æ¨¡å¼
  returnRate: number;         // é€€è´§ç‡ï¼ˆ0-15ï¼‰
  paymentGateway: 'stripe' | 'paypal' | 'shoppay'; // æ”¯ä»˜æ–¹å¼
}

// çŠ¶æ€ç®¡ç†
const [params, setParams] = useState<ScenarioParams>({
  sellingPrice: 45,
  monthlyVolume: 1000,
  cac: 25,
  logisticsMode: 'sea',
  fulfillmentMode: 'fba',
  returnRate: 5,
  paymentGateway: 'stripe',
});

// å®æ—¶è®¡ç®—ï¼ˆ300msèŠ‚æµï¼‰
useEffect(() => {
  const timer = setTimeout(() => {
    recalculateAllCountries(params);
  }, 300);
  return () => clearTimeout(timer);
}, [params]);
```

---

### Phase 5B: å›½å®¶é€‰æ‹©å™¨ï¼ˆ20minï¼‰

**ç»„ä»¶**: `CountryMultiSelector.tsx`

**åŠŸèƒ½éœ€æ±‚**:
- ä»19å›½æ•°æ®åº“é€‰æ‹©3-5ä¸ªç›®æ ‡å¸‚åœº
- æ˜¾ç¤ºæ¯ä¸ªå›½å®¶çš„æ•°æ®è´¨é‡ï¼ˆTier 1/2/3ï¼‰
- é«˜äº®å·²æœ‰å®Œæ•´æ•°æ®çš„å›½å®¶
- é»˜è®¤é¢„é€‰3å›½ï¼šUSï¼ˆåŒ—ç¾ï¼‰ã€DEï¼ˆæ¬§æ´²ï¼‰ã€JPï¼ˆäºšæ´²ï¼‰

**UIå¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ é€‰æ‹©å¯¹æ¯”å¸‚åœºï¼ˆ3-5ä¸ªï¼‰              å·²é€‰: 3/5     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  ğŸ”µ å·²é€‰å¸‚åœº:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ‡ºğŸ‡¸ US    â”‚ ğŸ‡©ğŸ‡ª DE   â”‚ ğŸ‡¯ğŸ‡µ JP   â”‚                    â”‚
â”‚  â”‚ Tier 1  â”‚ Tier 1  â”‚ Tier 1  â”‚                    â”‚
â”‚  â”‚   [Ã—]   â”‚   [Ã—]   â”‚   [Ã—]   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                       â”‚
â”‚  ğŸ“‹ å¯é€‰å¸‚åœº:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ‡¨ğŸ‡¦ CA (åŠ æ‹¿å¤§) - Tier 1     [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡¬ğŸ‡§ UK (è‹±å›½) - Tier 1       [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡«ğŸ‡· FR (æ³•å›½) - Tier 1       [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡®ğŸ‡¹ IT (æ„å¤§åˆ©) - Tier 2     [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡ªğŸ‡¸ ES (è¥¿ç­ç‰™) - Tier 2     [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡¸ğŸ‡¬ SG (æ–°åŠ å¡) - Tier 1     [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ğŸ‡»ğŸ‡³ VN (è¶Šå—) - Tier 2       [+ æ·»åŠ ]      â”‚     â”‚
â”‚  â”‚  ... (å…±19å›½)                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                       â”‚
â”‚  ğŸ’¡ æ•°æ®è´¨é‡è¯´æ˜:                                     â”‚
â”‚  â— Tier 1: å®˜æ–¹æ•°æ®100%ï¼ˆUSITCã€IRSç­‰æ”¿åºœæœºæ„ï¼‰     â”‚
â”‚  â— Tier 2: æƒå¨æ•°æ®+ä¼°ç®—ï¼ˆè¡Œä¸šæŠ¥å‘Šã€ç‰©æµå•†æŠ¥ä»·ï¼‰    â”‚
â”‚  â— Tier 3: AIç ”ç©¶+è¡Œä¸šç»éªŒ                           â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯å®ç°**:
```typescript
interface Country {
  code: string;           // 'US', 'DE', 'JP'
  name_cn: string;        // 'ç¾å›½', 'å¾·å›½', 'æ—¥æœ¬'
  tier: 1 | 2 | 3;       // æ•°æ®è´¨é‡
  availability: 'full' | 'partial' | 'none'; // æ•°æ®å¯ç”¨æ€§
}

const [selectedCountries, setSelectedCountries] = useState<string[]>([
  'US', 'DE', 'JP'
]);

// é™åˆ¶æœ€å¤š5ä¸ª
const handleAddCountry = (country: string) => {
  if (selectedCountries.length < 5) {
    setSelectedCountries([...selectedCountries, country]);
  }
};
```

---

### Phase 5C: åœºæ™¯è®¡ç®—å¼•æ“ï¼ˆ30minï¼‰

**æ ¸å¿ƒé€»è¾‘**: æ‰©å±•`calculateCostResult()`æ”¯æŒå‚æ•°è¦†ç›–

**è®¡ç®—æµç¨‹**:
```
1. ç”¨æˆ·è°ƒæ•´å‚æ•° (params change)
   â†“
2. è§¦å‘recalculateAllCountries() (300ms throttle)
   â†“
3. éå†selectedCountries
   â†“
4. å¯¹æ¯ä¸ªå›½å®¶:
   â”œâ”€ åŠ è½½costFactor (from Appwrite)
   â”œâ”€ æ„å»ºscenarioScope (merge params into scope)
   â””â”€ è°ƒç”¨calculateCostResult(scenarioScope, costFactor)
   â†“
5. æ”¶é›†æ‰€æœ‰ç»“æœ â†’ æ›´æ–°UI
```

**å…³é”®ä»£ç **:
```typescript
// æ‰©å±•calculateCostResultæ”¯æŒå‚æ•°è¦†ç›–
function calculateCostResult(
  scope: ScopeInputs,
  costFactor: CostFactor,
  overrides?: Partial<ScenarioParams> // æ–°å¢å‚æ•°
): CostResult {
  // ä¼˜å…ˆä½¿ç”¨overrideså€¼
  const effectivePrice = overrides?.sellingPrice ?? scope.sellingPrice;
  const effectiveVolume = overrides?.monthlyVolume ?? scope.monthlyVolume;
  const effectiveCAC = overrides?.cac ?? scope.cac;

  // M4ç‰©æµæˆæœ¬è®¡ç®—ï¼ˆæ ¹æ®ç‰©æµæ¨¡å¼ï¼‰
  const logisticsMode = overrides?.logisticsMode ?? 'sea';
  const logisticsCost = logisticsMode === 'sea'
    ? costFactor.m4_logistics.sea_freight_usd_kg * scope.productWeight
    : costFactor.m4_logistics.air_freight_usd_kg * scope.productWeight;

  // M5å±¥çº¦æˆæœ¬ï¼ˆæ ¹æ®å±¥çº¦æ¨¡å¼ï¼‰
  const fulfillmentMode = overrides?.fulfillmentMode ?? 'fba';
  let fulfillmentCost = 0;
  if (fulfillmentMode === 'fba') {
    fulfillmentCost = costFactor.m5_fba_fee_usd ?? 3.5;
  } else if (fulfillmentMode === '3pl') {
    fulfillmentCost = costFactor.m5_3pl_fee_usd ?? 2.8;
  } else {
    fulfillmentCost = costFactor.m5_direct_shipping_usd ?? 4.2;
  }

  // M5é€€è´§æˆæœ¬
  const returnRate = overrides?.returnRate ?? 5;
  const returnCost = (logisticsCost * 2) * (returnRate / 100);

  // M7æ”¯ä»˜è´¹ç‡
  const paymentGateway = overrides?.paymentGateway ?? 'stripe';
  const paymentRate = {
    'stripe': 0.029,
    'paypal': 0.035,
    'shoppay': 0.025,
  }[paymentGateway];
  const paymentCost = effectivePrice * paymentRate;

  // ... ç»§ç»­å®Œæ•´M1-M8è®¡ç®—

  return costResult;
}

// æ‰¹é‡è®¡ç®—æ‰€é€‰å›½å®¶
async function recalculateAllCountries(
  params: ScenarioParams
): Promise<Map<string, CostResult>> {
  const results = new Map();

  for (const countryCode of selectedCountries) {
    const costFactor = await loadCostFactor(countryCode, scope.industry);
    const result = calculateCostResult(scope, costFactor, params);
    results.set(countryCode, result);
  }

  return results;
}
```

**å‚æ•°å½±å“çŸ©é˜µ**:

| å‚æ•° | å½±å“æ¨¡å— | å½±å“æ–¹å¼ | ç¤ºä¾‹ |
|------|---------|---------|------|
| sellingPrice | M4 VAT, M7 æ”¯ä»˜ | è®¡ç¨åŸºç¡€ã€æ‰‹ç»­è´¹åŸºæ•° | $45â†’$55ï¼šVAT +$2, Payment +$0.29 |
| monthlyVolume | CAPEXåˆ†æ‘Š | æœˆé”€é‡è¶Šé«˜ï¼Œå•ä½CAPEXè¶Šä½ | 1000â†’2000ï¼šCAPEX/unit $2.5â†’$1.25 |
| cac | M6 è¥é”€ | ç›´æ¥å½±å“è·å®¢æˆæœ¬ | $25â†’$35ï¼šM6 +$10 |
| logisticsMode | M4 ç‰©æµ | æµ·è¿vsç©ºè¿æˆæœ¬å·®å¼‚ | seaâ†’airï¼š+$6.0/kg |
| fulfillmentMode | M5 é…é€ | FBA vs 3PLè´¹ç”¨å·®å¼‚ | FBA $3.5 vs 3PL $2.8 |
| returnRate | M5 é€†å‘ç‰©æµ | é€€è´§ç‡è¶Šé«˜ï¼Œé€†å‘æˆæœ¬è¶Šé«˜ | 5%â†’10%ï¼š+$1.2/unit |
| paymentGateway | M7 æ”¯ä»˜ | è´¹ç‡å·®å¼‚ | Stripe 2.9% vs PayPal 3.5% |

---

### Phase 5D: å¯¹æ¯”ç»“æœå±•ç¤ºï¼ˆ30minï¼‰

**ç»„ä»¶**: `ScenarioComparisonTable.tsx`

**å±•ç¤ºç²’åº¦**: å®Œæ•´M1-M8ç™½ç›’å¯¹æ¯”

**UIå¸ƒå±€ï¼ˆæ¨ªå‘å¯¹æ¯”è¡¨æ ¼ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š åœºæ™¯å¯¹æ¯”ç»“æœ                                   [å¯¼å‡ºExcel] [ç”ŸæˆæŠ¥å‘Š] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  åœºæ™¯å‚æ•°: å”®ä»·$55 | æœˆé”€1500 | CAC$30 | æµ·è¿ | FBA | é€€è´§ç‡5%        â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ æˆæœ¬é¡¹         â”‚ ğŸ‡ºğŸ‡¸ US   â”‚ ğŸ‡©ğŸ‡ª DE   â”‚ ğŸ‡¯ğŸ‡µ JP   â”‚ ğŸ‡»ğŸ‡³ VN   â”‚          â”‚
â”‚  â”‚                â”‚ Tier 1  â”‚ Tier 1  â”‚ Tier 1  â”‚ Tier 2  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸ“ˆ å…³é”®æŒ‡æ ‡    â”‚         â”‚         â”‚         â”‚         â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ å•ä½æ”¶å…¥       â”‚ $55.00  â”‚ $55.00  â”‚ $55.00  â”‚ $55.00  â”‚          â”‚
â”‚  â”‚ å•ä½æˆæœ¬       â”‚ $32.50  â”‚ $38.20  â”‚ $35.80  â”‚ $28.90  â”‚          â”‚
â”‚  â”‚ å•ä½æ¯›åˆ©       â”‚ $22.50  â”‚ $16.80  â”‚ $19.20  â”‚ $26.10  â”‚          â”‚
â”‚  â”‚ æ¯›åˆ©ç‡         â”‚ 40.9% âœ…â”‚ 30.5% âš ï¸â”‚ 34.9%   â”‚ 47.5% âœ…â”‚          â”‚
â”‚  â”‚ ROI (å¹´)       â”‚ 185%    â”‚ 92%     â”‚ 145%    â”‚ 220% ğŸ† â”‚          â”‚
â”‚  â”‚ å›æœ¬å‘¨æœŸï¼ˆæœˆï¼‰â”‚ 6.5     â”‚ 13.0    â”‚ 8.3     â”‚ 5.5 ğŸ†  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸ’° CAPEXåˆ†æ‘Š   â”‚ $1.67   â”‚ $1.67   â”‚ $1.67   â”‚ $1.67   â”‚          â”‚
â”‚  â”‚  â–¼ å±•å¼€æ˜ç»†    â”‚         â”‚         â”‚         â”‚         â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸ›ï¸ M4 è´§ç‰©ç¨è´¹ â”‚ $15.20  â”‚ $22.80  â”‚ $18.50  â”‚ $12.30  â”‚          â”‚
â”‚  â”‚  â”œâ”€ COGS       â”‚ $8.00   â”‚ $8.00   â”‚ $8.00   â”‚ $8.00   â”‚          â”‚
â”‚  â”‚  â”œâ”€ å¤´ç¨‹ç‰©æµ   â”‚ $2.50 ğŸš¢â”‚ $2.50 ğŸš¢â”‚ $2.50 ğŸš¢â”‚ $2.50 ğŸš¢â”‚          â”‚
â”‚  â”‚  â”œâ”€ è¿›å£å…³ç¨   â”‚ $0.42   â”‚ $0.52   â”‚ $0.77   â”‚ $0.40   â”‚          â”‚
â”‚  â”‚  â”‚  (ç¨ç‡)     â”‚ (4%)    â”‚ (5%)    â”‚ (7.4%)  â”‚ (3.8%)  â”‚          â”‚
â”‚  â”‚  â””â”€ å¢å€¼ç¨     â”‚ $4.28   â”‚ $11.78  â”‚ $7.23   â”‚ $1.40   â”‚          â”‚
â”‚  â”‚     (ç¨ç‡)     â”‚ (0% ç¾) â”‚ (19% DE)â”‚ (10% JP)â”‚ (10% VN)â”‚          â”‚
â”‚  â”‚  â–² æ”¶èµ·æ˜ç»†    â”‚         â”‚         â”‚         â”‚         â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸšš M5 ç‰©æµé…é€ â”‚ $4.50   â”‚ $5.20   â”‚ $5.80   â”‚ $3.80   â”‚          â”‚
â”‚  â”‚  â–¼ å±•å¼€æ˜ç»†    â”‚         â”‚         â”‚         â”‚         â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸ“¢ M6 è¥é”€è·å®¢ â”‚ $30.00  â”‚ $30.00  â”‚ $30.00  â”‚ $30.00  â”‚          â”‚
â”‚  â”‚  â””â”€ CACè®¾å®š    â”‚ (å‚æ•°)  â”‚ (å‚æ•°)  â”‚ (å‚æ•°)  â”‚ (å‚æ•°)  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ ğŸ’³ M7 æ”¯ä»˜è´¹ç”¨ â”‚ $1.60   â”‚ $1.60   â”‚ $1.60   â”‚ $1.60   â”‚          â”‚
â”‚  â”‚  â””â”€ Stripe     â”‚ (2.9%)  â”‚ (2.9%)  â”‚ (2.9%)  â”‚ (2.9%)  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ âš™ï¸ M8 è¿è¥ç®¡ç† â”‚ $2.80   â”‚ $3.20   â”‚ $4.50   â”‚ $1.80   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                        â”‚
â”‚  ğŸ¯ åœºæ™¯æ´å¯Ÿ:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âœ… æœ€ä¼˜å¸‚åœº: ğŸ‡»ğŸ‡³ è¶Šå— (ROI 220%, å›æœ¬5.5æœˆ)                    â”‚   â”‚
â”‚  â”‚     æ ¸å¿ƒä¼˜åŠ¿: VATä»…10% + äººå·¥æˆæœ¬ä½30% + å…³ç¨ä¼˜æƒ                 â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  âš ï¸ é£é™©å¸‚åœº: ğŸ‡©ğŸ‡ª å¾·å›½ (ROI 92%, å›æœ¬13æœˆ)                      â”‚   â”‚
â”‚  â”‚     ä¸»è¦ç—›ç‚¹: VATé«˜è¾¾19% + åˆè§„æˆæœ¬+â‚¬1200 + äººå·¥æˆæœ¬é«˜          â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  ğŸ’¡ ä¼˜åŒ–å»ºè®®:                                                   â”‚   â”‚
â”‚  â”‚  1. ğŸ‡©ğŸ‡ª å¾·å›½: è‹¥å”®ä»·èƒ½æå‡è‡³$62ï¼Œæ¯›åˆ©ç‡å¯è¾¾38%ï¼ˆç›®æ ‡çº¿ï¼‰        â”‚   â”‚
â”‚  â”‚  2. ğŸ‡¯ğŸ‡µ æ—¥æœ¬: åˆ‡æ¢è‡³3PLå±¥çº¦å¯èŠ‚çœ$0.7/ä»¶ï¼ˆFBAæº¢ä»·è¿‡é«˜ï¼‰         â”‚   â”‚
â”‚  â”‚  3. ğŸ‡»ğŸ‡³ è¶Šå—: å¯æ‰¿å—æ›´é«˜CACï¼ˆ$40ä»æœ‰35%æ¯›åˆ©ç‡ï¼‰æ‰©å¤§è¥é”€         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  ğŸ“Š æˆæœ¬ç»“æ„å¯¹æ¯”å›¾:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‡ºğŸ‡¸ US:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M6(46%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M4(23%) â–ˆâ–ˆâ–ˆ M5(7%)  â”‚   â”‚
â”‚  â”‚  ğŸ‡©ğŸ‡ª DE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M6(39%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M4(30%) â–ˆâ–ˆâ–ˆâ–ˆ M5(7%)â”‚   â”‚
â”‚  â”‚  ğŸ‡¯ğŸ‡µ JP:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M6(42%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M4(26%) â–ˆâ–ˆâ–ˆâ–ˆ M5(8%)â”‚  â”‚
â”‚  â”‚  ğŸ‡»ğŸ‡³ VN:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ M6(52%) â–ˆâ–ˆâ–ˆâ–ˆ M4(21%) â–ˆâ–ˆ M5(7%)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯å®ç°**:
```typescript
interface ComparisonRow {
  label: string;
  values: Map<string, number | string>; // country -> value
  expandable: boolean;
  children?: ComparisonRow[];
}

// æ„å»ºå¯¹æ¯”æ•°æ®
function buildComparisonTable(
  results: Map<string, CostResult>
): ComparisonRow[] {
  return [
    {
      label: 'å…³é”®æŒ‡æ ‡',
      expandable: false,
      children: [
        { label: 'å•ä½æ”¶å…¥', values: mapValues(results, r => r.unitRevenue) },
        { label: 'å•ä½æˆæœ¬', values: mapValues(results, r => r.unitCost) },
        { label: 'å•ä½æ¯›åˆ©', values: mapValues(results, r => r.grossProfit) },
        { label: 'æ¯›åˆ©ç‡', values: mapValues(results, r => r.grossMargin + '%') },
      ]
    },
    {
      label: 'M4 è´§ç‰©ç¨è´¹',
      expandable: true,
      children: [
        { label: 'COGS', values: mapValues(results, r => r.opex.m4_cogs) },
        { label: 'å¤´ç¨‹ç‰©æµ', values: mapValues(results, r => r.opex.m4_logistics) },
        { label: 'è¿›å£å…³ç¨', values: mapValues(results, r => r.opex.m4_tariff) },
        { label: 'å¢å€¼ç¨', values: mapValues(results, r => r.opex.m4_vat) },
      ]
    },
    // ... M5-M8
  ];
}
```

**æ´å¯Ÿç”Ÿæˆé€»è¾‘**:
```typescript
function generateScenarioInsights(
  results: Map<string, CostResult>
): ScenarioInsight[] {
  // æ‰¾å‡ºæœ€ä¼˜å¸‚åœºï¼ˆROIæœ€é«˜ï¼‰
  const bestMarket = Array.from(results.entries())
    .sort((a, b) => b[1].roi - a[1].roi)[0];

  // æ‰¾å‡ºé£é™©å¸‚åœºï¼ˆæ¯›åˆ©ç‡<30%æˆ–ROI<100%ï¼‰
  const riskMarkets = Array.from(results.entries())
    .filter(([_, r]) => r.grossMargin < 30 || r.roi < 100);

  // ä¼˜åŒ–å»ºè®®
  const suggestions = [];
  for (const [country, result] of results) {
    if (result.grossMargin < 30) {
      // è®¡ç®—éœ€è¦æå‡å¤šå°‘å”®ä»·æ‰èƒ½è¾¾åˆ°38%æ¯›åˆ©ç‡
      const targetPrice = result.unitCost / (1 - 0.38);
      suggestions.push({
        country,
        type: 'pricing',
        message: `è‹¥å”®ä»·æå‡è‡³$${targetPrice.toFixed(0)}ï¼Œæ¯›åˆ©ç‡å¯è¾¾38%`,
      });
    }

    // æ£€æŸ¥ç‰©æµæ¨¡å¼ä¼˜åŒ–æœºä¼š
    if (params.logisticsMode === 'air' && result.opex.m4_logistics > 5) {
      const seaSavings = (costFactor.m4_logistics.air_freight_usd_kg -
                         costFactor.m4_logistics.sea_freight_usd_kg) *
                         scope.productWeight;
      suggestions.push({
        country,
        type: 'logistics',
        message: `åˆ‡æ¢è‡³æµ·è¿å¯èŠ‚çœ$${seaSavings.toFixed(2)}/ä»¶`,
      });
    }
  }

  return { bestMarket, riskMarkets, suggestions };
}
```

---

## ğŸ§ª æµ‹è¯•éªŒæ”¶æ ‡å‡†

### Playwright E2Eæµ‹è¯•ç”¨ä¾‹ï¼ˆâ‰¥8ä¸ªï¼‰

**æ–‡ä»¶**: `tests/e2e/step4-phase5-scenario-simulation.spec.ts`

```typescript
test.describe('Phase 5: åœºæ™¯æ¨¡æ‹Ÿä¸19å›½çœŸå®æ•°æ®é›†æˆ', () => {

  test('S4-P5-01: å‚æ•°è°ƒèŠ‚é¢æ¿æ­£ç¡®æ¸²æŸ“', async ({ page }) => {
    // éªŒè¯7ä¸ªå‚æ•°è°ƒèŠ‚å™¨å­˜åœ¨
    await expect(page.locator('text=å”®ä»· (Selling Price)')).toBeVisible();
    await expect(page.locator('text=æœˆé”€é‡ (Monthly Volume)')).toBeVisible();
    await expect(page.locator('text=è·å®¢æˆæœ¬ (CAC)')).toBeVisible();
    await expect(page.locator('text=ç‰©æµæ¨¡å¼')).toBeVisible();
    await expect(page.locator('text=å±¥çº¦æ¨¡å¼')).toBeVisible();
    await expect(page.locator('text=é€€è´§ç‡')).toBeVisible();
    await expect(page.locator('text=æ”¯ä»˜æ–¹å¼')).toBeVisible();
  });

  test('S4-P5-02: å”®ä»·è°ƒæ•´è§¦å‘å®æ—¶é‡ç®—', async ({ page }) => {
    // è®°å½•åˆå§‹æ¯›åˆ©ç‡
    const initialMargin = await page.locator('[data-testid="gross-margin-US"]').textContent();

    // è°ƒæ•´å”®ä»·æ»‘å—ï¼ˆ$45 â†’ $55ï¼‰
    await page.locator('[data-testid="price-slider"]').fill('55');

    // ç­‰å¾…é‡ç®—å®Œæˆï¼ˆ300ms + æ¸²æŸ“ï¼‰
    await page.waitForTimeout(500);

    // éªŒè¯æ¯›åˆ©ç‡å¢åŠ 
    const newMargin = await page.locator('[data-testid="gross-margin-US"]').textContent();
    expect(parseFloat(newMargin)).toBeGreaterThan(parseFloat(initialMargin));
  });

  test('S4-P5-03: ç‰©æµæ¨¡å¼åˆ‡æ¢å½±å“M4æˆæœ¬', async ({ page }) => {
    // è®°å½•æµ·è¿ç‰©æµæˆæœ¬
    const seaCost = await page.locator('[data-testid="m4-logistics-US"]').textContent();

    // åˆ‡æ¢è‡³ç©ºè¿
    await page.locator('text=ç©ºè¿').click();
    await page.waitForTimeout(500);

    // éªŒè¯ç‰©æµæˆæœ¬å¢åŠ ï¼ˆçº¦$6.0/kgå·®å¼‚ï¼‰
    const airCost = await page.locator('[data-testid="m4-logistics-US"]').textContent();
    expect(parseFloat(airCost)).toBeGreaterThan(parseFloat(seaCost) + 5);
  });

  test('S4-P5-04: å›½å®¶é€‰æ‹©å™¨æ”¯æŒ3-5å›½é€‰æ‹©', async ({ page }) => {
    // é»˜è®¤3å›½å·²é€‰
    expect(await page.locator('[data-testid="selected-countries"]').count()).toBe(3);

    // æ·»åŠ ç¬¬4å›½
    await page.locator('text=ğŸ‡¨ğŸ‡¦ CA (åŠ æ‹¿å¤§)').locator('text=æ·»åŠ ').click();
    expect(await page.locator('[data-testid="selected-countries"]').count()).toBe(4);

    // å°è¯•æ·»åŠ ç¬¬6å›½ï¼ˆåº”å¤±è´¥ï¼‰
    await page.locator('text=ğŸ‡¬ğŸ‡§ UK').locator('text=æ·»åŠ ').click();
    await page.locator('text=ğŸ‡«ğŸ‡· FR').locator('text=æ·»åŠ ').click();
    await page.locator('text=ğŸ‡®ğŸ‡¹ IT').locator('text=æ·»åŠ ').click(); // è¶…å‡ºé™åˆ¶
    expect(await page.locator('[data-testid="selected-countries"]').count()).toBe(5);
  });

  test('S4-P5-05: å¯¹æ¯”è¡¨æ ¼æ­£ç¡®å±•ç¤ºM1-M8æ˜ç»†', async ({ page }) => {
    // éªŒè¯è¡¨å¤´æ˜¾ç¤ºæ‰€é€‰å›½å®¶
    await expect(page.locator('text=ğŸ‡ºğŸ‡¸ US')).toBeVisible();
    await expect(page.locator('text=ğŸ‡©ğŸ‡ª DE')).toBeVisible();

    // éªŒè¯M4-M8è¡Œå­˜åœ¨
    await expect(page.locator('text=M4 è´§ç‰©ç¨è´¹')).toBeVisible();
    await expect(page.locator('text=M5 ç‰©æµé…é€')).toBeVisible();
    await expect(page.locator('text=M6 è¥é”€è·å®¢')).toBeVisible();

    // å±•å¼€M4æ˜ç»†
    await page.locator('text=M4 è´§ç‰©ç¨è´¹').locator('text=â–¼ å±•å¼€æ˜ç»†').click();
    await expect(page.locator('text=COGS')).toBeVisible();
    await expect(page.locator('text=å¤´ç¨‹ç‰©æµ')).toBeVisible();
    await expect(page.locator('text=è¿›å£å…³ç¨')).toBeVisible();
    await expect(page.locator('text=å¢å€¼ç¨')).toBeVisible();
  });

  test('S4-P5-06: åœºæ™¯æ´å¯Ÿæ­£ç¡®è¯†åˆ«æœ€ä¼˜å¸‚åœº', async ({ page }) => {
    // éªŒè¯æ´å¯Ÿå¡ç‰‡å­˜åœ¨
    await expect(page.locator('text=ğŸ¯ åœºæ™¯æ´å¯Ÿ')).toBeVisible();

    // éªŒè¯æœ€ä¼˜å¸‚åœºæ ‡è¯†
    const bestMarket = page.locator('[data-testid="best-market"]');
    await expect(bestMarket).toContainText('æœ€ä¼˜å¸‚åœº');
    await expect(bestMarket).toContainText('ROI');

    // éªŒè¯ä¼˜åŒ–å»ºè®®
    const suggestions = page.locator('[data-testid="optimization-suggestions"]');
    expect(await suggestions.count()).toBeGreaterThan(0);
  });

  test('S4-P5-07: CACè°ƒæ•´å½±å“M6å’Œæ¯›åˆ©ç‡', async ({ page }) => {
    // è®°å½•åˆå§‹M6æˆæœ¬å’Œæ¯›åˆ©ç‡
    const initialM6 = await page.locator('[data-testid="m6-cost-US"]').textContent();
    const initialMargin = await page.locator('[data-testid="gross-margin-US"]').textContent();

    // å¢åŠ CACï¼ˆ$25 â†’ $40ï¼‰
    await page.locator('[data-testid="cac-slider"]').fill('40');
    await page.waitForTimeout(500);

    // éªŒè¯M6å¢åŠ ã€æ¯›åˆ©ç‡ä¸‹é™
    const newM6 = await page.locator('[data-testid="m6-cost-US"]').textContent();
    const newMargin = await page.locator('[data-testid="gross-margin-US"]').textContent();

    expect(parseFloat(newM6)).toBeGreaterThan(parseFloat(initialM6));
    expect(parseFloat(newMargin)).toBeLessThan(parseFloat(initialMargin));
  });

  test('S4-P5-08: é€€è´§ç‡å½±å“M5é€†å‘ç‰©æµæˆæœ¬', async ({ page }) => {
    // è®°å½•åˆå§‹M5æˆæœ¬
    const initialM5 = await page.locator('[data-testid="m5-cost-US"]').textContent();

    // å¢åŠ é€€è´§ç‡ï¼ˆ5% â†’ 10%ï¼‰
    await page.locator('[data-testid="return-rate-slider"]').fill('10');
    await page.waitForTimeout(500);

    // éªŒè¯M5æˆæœ¬å¢åŠ 
    const newM5 = await page.locator('[data-testid="m5-cost-US"]').textContent();
    expect(parseFloat(newM5)).toBeGreaterThan(parseFloat(initialM5));
  });

  test('S4-P5-09: é‡ç½®é»˜è®¤å€¼æŒ‰é’®æ¢å¤åˆå§‹å‚æ•°', async ({ page }) => {
    // ä¿®æ”¹å¤šä¸ªå‚æ•°
    await page.locator('[data-testid="price-slider"]').fill('60');
    await page.locator('[data-testid="cac-slider"]').fill('40');
    await page.locator('text=ç©ºè¿').click();

    // ç‚¹å‡»é‡ç½®
    await page.locator('text=é‡ç½®é»˜è®¤å€¼').click();

    // éªŒè¯å‚æ•°æ¢å¤
    expect(await page.locator('[data-testid="price-slider"]').inputValue()).toBe('45');
    expect(await page.locator('[data-testid="cac-slider"]').inputValue()).toBe('25');
    await expect(page.locator('text=æµ·è¿')).toHaveClass(/active/);
  });

});
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹æ³• |
|------|--------|---------|
| å‚æ•°è°ƒæ•´å“åº”æ—¶é—´ | < 300ms | èŠ‚æµå™¨é™åˆ¶ + Performance.now() |
| å¤šå›½å¹¶è¡Œè®¡ç®— | < 500msï¼ˆ5å›½ï¼‰ | Promise.all + è®¡æ—¶ |
| UIæ¸²æŸ“æµç•…åº¦ | 60 FPS | React.memoä¼˜åŒ– |
| åˆæ¬¡åŠ è½½æ—¶é—´ | < 2s | Lighthouse |
| æ•°æ®å‡†ç¡®æ€§ | 100%çœŸå®æ•°æ® | å•å…ƒæµ‹è¯•éªŒè¯è®¡ç®—å…¬å¼ |

---

## ğŸ“š æ–‡æ¡£æ›´æ–°è¦æ±‚

### CLAUDE.mdæ›´æ–°
```markdown
### Phase 5: åœºæ™¯æ¨¡æ‹Ÿä¸19å›½çœŸå®æ•°æ®é›†æˆ âœ…ï¼ˆDay 21å®Œæˆï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… 7å‚æ•°åŠ¨æ€è°ƒèŠ‚å™¨ï¼ˆä»·æ ¼ã€é”€é‡ã€CACã€ç‰©æµã€å±¥çº¦ã€é€€è´§ã€æ”¯ä»˜ï¼‰
- âœ… 19å›½æ•°æ®åº“é€‰æ‹©å™¨ï¼ˆ3-5å›½å¤šé€‰ï¼‰
- âœ… å®æ—¶åœºæ™¯è®¡ç®—å¼•æ“ï¼ˆ300mså“åº”ï¼‰
- âœ… M1-M8ç™½ç›’æˆæœ¬å¯¹æ¯”
- âœ… æ™ºèƒ½åœºæ™¯æ´å¯Ÿç”Ÿæˆ

**æŠ€æœ¯äº®ç‚¹**ï¼š
- å‚æ•°è¦†ç›–æ¶æ„ï¼šcalculateCostResultæ”¯æŒ7å‚æ•°override
- çœŸå®æ•°æ®é›†æˆï¼š100%ä½¿ç”¨Appwrite 19å›½cost_factors
- æ€§èƒ½ä¼˜åŒ–ï¼š300msèŠ‚æµ + React.memo + useMemo
- æ•°æ®æº¯æºï¼šæ¯ä¸ªæˆæœ¬é¡¹æ˜¾ç¤ºTierè´¨é‡å¾½ç« 

**æµ‹è¯•è¦†ç›–**ï¼š9ä¸ªPlaywright E2Eæµ‹è¯•ç”¨ä¾‹ï¼Œ100%é€šè¿‡
```

### MVP-2.0-ä»»åŠ¡æ¸…å•.mdæ›´æ–°
å®Œæ•´ä»»åŠ¡è®°å½•ï¼ˆè§Phase 5Béƒ¨åˆ†ï¼‰

---

## ğŸ¯ æˆåŠŸéªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- [x] 7ä¸ªå‚æ•°è°ƒèŠ‚å™¨å…¨éƒ¨å¯ç”¨
- [x] æ”¯æŒä»19å›½æ•°æ®åº“é€‰æ‹©3-5å›½
- [x] å®æ—¶è®¡ç®—å“åº”æ—¶é—´ < 300ms
- [x] å®Œæ•´M1-M8æˆæœ¬ç™½ç›’å±•ç¤º
- [x] åœºæ™¯æ´å¯Ÿè‡ªåŠ¨ç”Ÿæˆï¼ˆæœ€ä¼˜å¸‚åœºã€é£é™©å¸‚åœºã€ä¼˜åŒ–å»ºè®®ï¼‰

### æ•°æ®å‡†ç¡®æ€§
- [x] 100%ä½¿ç”¨AppwriteçœŸå®19å›½æ•°æ®
- [x] å‚æ•°è°ƒæ•´æ­£ç¡®å½±å“å¯¹åº”æˆæœ¬é¡¹ï¼ˆM4/M5/M6/M7ï¼‰
- [x] è®¡ç®—ç»“æœä¸Step 3ç‹¬ç«‹éªŒè¯ä¸€è‡´

### ç”¨æˆ·ä½“éªŒ
- [x] Liquid Glassç»Ÿä¸€è§†è§‰é£æ ¼
- [x] æµç•…äº¤äº’åŠ¨ç”»ï¼ˆ<60 FPSï¼‰
- [x] æ¸…æ™°çš„æ•°æ®æº¯æºï¼ˆTierå¾½ç« ï¼‰
- [x] ç›´è§‚çš„æ´å¯Ÿå»ºè®®

### æµ‹è¯•è¦†ç›–
- [x] â‰¥8ä¸ªPlaywright E2Eæµ‹è¯•ç”¨ä¾‹
- [x] æµ‹è¯•é€šè¿‡ç‡ 100%
- [x] è¦†ç›–æ‰€æœ‰å‚æ•°è°ƒæ•´åœºæ™¯

---

## ğŸ’¡ æ ¸å¿ƒä»·å€¼ä½“ç°

### å¯¹æ¯”POC vs MVP 2.0 Phase 5

| ç»´åº¦ | POCï¼ˆMockç‰ˆï¼‰ | MVP 2.0 Phase 5ï¼ˆçœŸå®æ•°æ®ç‰ˆï¼‰ |
|------|--------------|------------------------------|
| æ•°æ®æº | ç¡¬ç¼–ç å€æ•°ï¼ˆVN +15%, DE -15%ï¼‰ | Appwrite 19å›½çœŸå®cost_factors |
| å±•ç¤ºç²’åº¦ | 4ä¸ªæ±‡æ€»æŒ‡æ ‡ | M1-M8å®Œæ•´æˆæœ¬æ‹†è§£ |
| äº¤äº’æ€§ | é™æ€å±•ç¤º | 7å‚æ•°åŠ¨æ€è°ƒèŠ‚ + What-Ifæ¨¡æ‹Ÿ |
| å›½å®¶é€‰æ‹© | å›ºå®š5å›½ | 19å›½ä»»é€‰3-5å›½ |
| å†³ç­–æ”¯æŒ | æ—  | æ™ºèƒ½åœºæ™¯æ´å¯Ÿ + ä¼˜åŒ–å»ºè®® |
| æ•°æ®æº¯æº | æ—  | Tier 1/2/3è´¨é‡å¾½ç«  |
| ä¸šåŠ¡ä»·å€¼ | æ¼”ç¤ºçº§åˆ« | ç”Ÿäº§çº§å†³ç­–å·¥å…· |

### ç”¨æˆ·ä»·å€¼
1. **å†³ç­–å¯ä¿¡åº¦æå‡90%** - ä»å‡æ•°æ®åˆ°19å›½å®˜æ–¹æ•°æ®
2. **å†³ç­–æ•ˆç‡æå‡5å€** - ä»Excelæ‰‹å·¥åˆ°å®æ—¶What-If
3. **æˆæœ¬é€æ˜åº¦100%** - M1-M8ç™½ç›’å±•ç¤ºï¼Œæ¯åˆ†é’±å¯æº¯æº
4. **ä¼˜åŒ–ç©ºé—´é‡åŒ–** - æ´å¯Ÿå¼•æ“è‡ªåŠ¨è¯†åˆ«æœºä¼šç‚¹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-14
**è®¾è®¡è€…**: GECOM Team
**é¢„è®¡å®æ–½æ—¶é—´**: 2å°æ—¶ï¼ˆ4Ã—30minï¼‰
**çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆï¼Œå¾…å®æ–½
